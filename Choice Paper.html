<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Bijesh Mishra, Ph.D.">

<title>Choice Paper</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Choice Paper_files/libs/clipboard/clipboard.min.js"></script>
<script src="Choice Paper_files/libs/quarto-html/quarto.js"></script>
<script src="Choice Paper_files/libs/quarto-html/popper.min.js"></script>
<script src="Choice Paper_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Choice Paper_files/libs/quarto-html/anchor.min.js"></script>
<link href="Choice Paper_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Choice Paper_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Choice Paper_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Choice Paper_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Choice Paper_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setting-up" id="toc-setting-up" class="nav-link active" data-scroll-target="#setting-up"><span class="header-section-number">1</span> Setting Up</a>
  <ul class="collapse">
  <li><a href="#housekeeping" id="toc-housekeeping" class="nav-link" data-scroll-target="#housekeeping"><span class="header-section-number">1.1</span> Housekeeping</a></li>
  <li><a href="#working-directory" id="toc-working-directory" class="nav-link" data-scroll-target="#working-directory"><span class="header-section-number">1.2</span> Working directory</a></li>
  <li><a href="#load-libraries" id="toc-load-libraries" class="nav-link" data-scroll-target="#load-libraries"><span class="header-section-number">1.3</span> Load libraries</a></li>
  <li><a href="#theme-for-plots" id="toc-theme-for-plots" class="nav-link" data-scroll-target="#theme-for-plots"><span class="header-section-number">1.4</span> Theme for plots</a></li>
  </ul></li>
  <li><a href="#import-data" id="toc-import-data" class="nav-link" data-scroll-target="#import-data"><span class="header-section-number">2</span> Import data</a>
  <ul class="collapse">
  <li><a href="#tomato" id="toc-tomato" class="nav-link" data-scroll-target="#tomato"><span class="header-section-number">2.1</span> Tomato</a></li>
  <li><a href="#strawberry" id="toc-strawberry" class="nav-link" data-scroll-target="#strawberry"><span class="header-section-number">2.2</span> Strawberry</a></li>
  <li><a href="#squash" id="toc-squash" class="nav-link" data-scroll-target="#squash"><span class="header-section-number">2.3</span> Squash</a></li>
  <li><a href="#electricity-price" id="toc-electricity-price" class="nav-link" data-scroll-target="#electricity-price"><span class="header-section-number">2.4</span> Electricity price</a></li>
  <li><a href="#pv-system-cost" id="toc-pv-system-cost" class="nav-link" data-scroll-target="#pv-system-cost"><span class="header-section-number">2.5</span> PV system cost</a></li>
  <li><a href="#capex-nrel" id="toc-capex-nrel" class="nav-link" data-scroll-target="#capex-nrel"><span class="header-section-number">2.6</span> Capex (NREL)</a>
  <ul class="collapse">
  <li><a href="#plotting-capex" id="toc-plotting-capex" class="nav-link" data-scroll-target="#plotting-capex"><span class="header-section-number">2.6.1</span> Plotting capex</a></li>
  </ul></li>
  <li><a href="#panel-configuration" id="toc-panel-configuration" class="nav-link" data-scroll-target="#panel-configuration"><span class="header-section-number">2.7</span> Panel Configuration</a></li>
  <li><a href="#energy-output" id="toc-energy-output" class="nav-link" data-scroll-target="#energy-output"><span class="header-section-number">2.8</span> Energy output</a>
  <ul class="collapse">
  <li><a href="#energy-output-by-solar-panels-counts" id="toc-energy-output-by-solar-panels-counts" class="nav-link" data-scroll-target="#energy-output-by-solar-panels-counts"><span class="header-section-number">2.8.1</span> Energy output by solar panels counts</a></li>
  <li><a href="#energy-output-by-dc-system-size" id="toc-energy-output-by-dc-system-size" class="nav-link" data-scroll-target="#energy-output-by-dc-system-size"><span class="header-section-number">2.8.2</span> Energy output by DC System Size</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#revenue-from-energy" id="toc-revenue-from-energy" class="nav-link" data-scroll-target="#revenue-from-energy"><span class="header-section-number">3</span> Revenue from energy</a>
  <ul class="collapse">
  <li><a href="#simulation-1" id="toc-simulation-1" class="nav-link" data-scroll-target="#simulation-1"><span class="header-section-number">3.1</span> Simulation 1</a></li>
  <li><a href="#simulation-2" id="toc-simulation-2" class="nav-link" data-scroll-target="#simulation-2"><span class="header-section-number">3.2</span> Simulation 2</a></li>
  <li><a href="#plotting-revenue-from-energy-production" id="toc-plotting-revenue-from-energy-production" class="nav-link" data-scroll-target="#plotting-revenue-from-energy-production"><span class="header-section-number">3.3</span> Plotting revenue from energy production</a></li>
  </ul></li>
  <li><a href="#solar-system-cost" id="toc-solar-system-cost" class="nav-link" data-scroll-target="#solar-system-cost"><span class="header-section-number">4</span> Solar system cost</a></li>
  <li><a href="#profit-from-solar" id="toc-profit-from-solar" class="nav-link" data-scroll-target="#profit-from-solar"><span class="header-section-number">5</span> Profit from solar</a>
  <ul class="collapse">
  <li><a href="#plot-profit-from-solar" id="toc-plot-profit-from-solar" class="nav-link" data-scroll-target="#plot-profit-from-solar"><span class="header-section-number">5.1</span> Plot profit from solar</a></li>
  </ul></li>
  <li><a href="#profit-from-crops" id="toc-profit-from-crops" class="nav-link" data-scroll-target="#profit-from-crops"><span class="header-section-number">6</span> Profit from crops</a>
  <ul class="collapse">
  <li><a href="#tomato-1" id="toc-tomato-1" class="nav-link" data-scroll-target="#tomato-1"><span class="header-section-number">6.1</span> Tomato</a></li>
  <li><a href="#strawberry-1" id="toc-strawberry-1" class="nav-link" data-scroll-target="#strawberry-1"><span class="header-section-number">6.2</span> Strawberry</a></li>
  <li><a href="#squash-1" id="toc-squash-1" class="nav-link" data-scroll-target="#squash-1"><span class="header-section-number">6.3</span> Squash</a></li>
  </ul></li>
  <li><a href="#profit-from-agrivoltaics" id="toc-profit-from-agrivoltaics" class="nav-link" data-scroll-target="#profit-from-agrivoltaics"><span class="header-section-number">7</span> Profit from agrivoltaics</a>
  <ul class="collapse">
  <li><a href="#profit-from-tomato-agrivoltaic-system" id="toc-profit-from-tomato-agrivoltaic-system" class="nav-link" data-scroll-target="#profit-from-tomato-agrivoltaic-system"><span class="header-section-number">7.1</span> Profit from tomato agrivoltaic system</a></li>
  <li><a href="#profit-from-strawberry-agrivoltaic-system" id="toc-profit-from-strawberry-agrivoltaic-system" class="nav-link" data-scroll-target="#profit-from-strawberry-agrivoltaic-system"><span class="header-section-number">7.2</span> Profit from strawberry agrivoltaic system</a></li>
  <li><a href="#profit-from-squash-agrivoltaic-system" id="toc-profit-from-squash-agrivoltaic-system" class="nav-link" data-scroll-target="#profit-from-squash-agrivoltaic-system"><span class="header-section-number">7.3</span> Profit from squash agrivoltaic system</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Choice Paper.ipynb" download="Choice Paper.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Choice Paper</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Bijesh Mishra, Ph.D. </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p>Technoeconomic anlaysis of agrivoltaic systems in Alabama. A paper for <a href="https://www.aaea.org/publications/choices-magazine" class="uri">Choice Magazine</a> by AAEA.</p>
<section id="setting-up" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Setting Up</h1>
<section id="housekeeping" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="housekeeping"><span class="header-section-number">1.1</span> Housekeeping</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #| echo: TRUE</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) <span class="co"># Clean the environment.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">warn=</span><span class="dv">0</span>, <span class="co"># Warnings. options(warn=-1) / options(warn=0)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">scipen=</span><span class="dv">999</span> <span class="co"># No scientific notations.</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="working-directory" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="working-directory"><span class="header-section-number">1.2</span> Working directory</h2>
<p>Codes and output are suppressed. Errors and warnings are visible. No warning and no error means code is working as it should.</p>
<div class="cell">
<div class="cell-output cell-output-error">
<pre><code>Error in setwd(path_office): cannot change working directory</code></pre>
</div>
</div>
</section>
<section id="load-libraries" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="load-libraries"><span class="header-section-number">1.3</span> Load libraries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.1
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(likert,  <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Likert Items</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mice,  <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx2, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Scatter plot</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gmodels,  <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Crosstab</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Reshape data</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman,  <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Package Management</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_loaded</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "pacman"    "reshape2"  "gmodels"   "ggpubr"    "openxlsx2" "mice"     
 [7] "likert"    "xtable"    "psych"     "lubridate" "forcats"   "stringr"  
[13] "dplyr"     "purrr"     "readr"     "tidyr"     "tibble"    "ggplot2"  
[19] "tidyverse"</code></pre>
</div>
</div>
</section>
<section id="theme-for-plots" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="theme-for-plots"><span class="header-section-number">1.4</span> Theme for plots</h2>
<p>Setting theme for plots:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">####### Plotting Data: #####</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Map Theme:</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>plottheme <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mapping theme:</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">r =</span> <span class="dv">0</span>, </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">b =</span> <span class="dv">0</span>, </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>                             <span class="at">l =</span> <span class="dv">0</span>, </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>                             <span class="at">unit =</span> <span class="st">"cm"</span>),</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, </span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, </span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"lightgrey"</span>,</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"lightgrey"</span>,</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"grey"</span>,</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"grey"</span>,</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.x.top =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.y.right =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.x.bottom =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linetype =</span> <span class="dv">1</span>,</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.y.left =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linetype =</span> <span class="dv">1</span>,</span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Text formatting:</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"serif"</span>, <span class="co"># font</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>                            <span class="at">size =</span> <span class="dv">12</span>, <span class="co"># font size</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>                            <span class="at">colour =</span> <span class="st">"black"</span><span class="co"># font color</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.95</span>, <span class="sc">-</span><span class="fl">0.05</span>),</span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">"black"</span>, </span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">fill =</span> <span class="cn">NA</span>, </span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">linewidth =</span> <span class="fl">0.05</span>, </span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">linetype =</span> <span class="dv">1</span>),</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"right"</span>,</span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="import-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Import data</h1>
<p>Import necessary data.</p>
<section id="tomato" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="tomato"><span class="header-section-number">2.1</span> Tomato</h2>
<ul>
<li><p>Yield = Total tomato production (total bucket of 25 lb) from 1 acres of land which varies from 10% to 200% of total production (100%). The range was simulated by multiplying 100% yield by yldvar.</p></li>
<li><p>yldvar = Yield variation parameter ranges from 10% to 200%.</p></li>
<li><p>Rev17 to Rev23 = Revenue for price ranges of $17 to $23 per bucket of tomato.</p></li>
<li><p>Total cost = Total cost of production for the given yield.</p></li>
<li><p>rolac17 to rolac23= Return to operator, labor and capital for price range of $17 to $23.</p></li>
<li><p>operator Cost = Operator labor cost at $15/hour for given yield. For 100% yield, total hours = 90.</p></li>
<li><p>rlc17 to 23 = Return to land and capital after subtracting operator cost from total revenue.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>tomato <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"Parameters.xlsx"</span>,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">sheet =</span> <span class="st">"Tomato"</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">start_row =</span> <span class="dv">2</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">start_col =</span> <span class="dv">9</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">skip_empty_rows =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">skip_empty_cols =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">col_names =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">yield =</span> Yield,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">yldvar =</span> <span class="st">`</span><span class="at">Yield Variation (%)</span><span class="st">`</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(tomato)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tomato); <span class="fu">tail</span>(tomato)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar yield Rev17 Rev18 Rev19 Rev20 Rev21 Rev22 Rev23 Total Cost  rolac17
3    2.0  2720 46240 48960 51680 54400 57120 59840 62560   24560.62 21679.38
4    1.9  2584 43928 46512 49096 51680 54264 56848 59432   23862.62 20065.38
5    1.8  2448 41616 44064 46512 48960 51408 53856 56304   23164.62 18451.38
6    1.7  2312 39304 41616 43928 46240 48552 50864 53176   22466.62 16837.38
7    1.6  2176 36992 39168 41344 43520 45696 47872 50048   21768.62 15223.38
8    1.5  2040 34680 36720 38760 40800 42840 44880 46920   21070.62 13609.38
   rolac18  rolac19  rolac20  rolac21  rolac22  rolac23 Operator Cost    rlc17
3 24399.38 27119.38 29839.38 32559.38 35279.38 37999.38          2700 18979.38
4 22649.38 25233.38 27817.38 30401.38 32985.38 35569.38          2565 17500.38
5 20899.38 23347.38 25795.38 28243.38 30691.38 33139.38          2430 16021.38
6 19149.38 21461.38 23773.38 26085.38 28397.38 30709.38          2295 14542.38
7 17399.38 19575.38 21751.38 23927.38 26103.38 28279.38          2160 13063.38
8 15649.38 17689.38 19729.38 21769.38 23809.38 25849.38          2025 11584.38
     rlc18    rlc19    rlc20    rlc21    rlc22   rlc223
3 21699.38 24419.38 27139.38 29859.38 32579.38 35299.38
4 20084.38 22668.38 25252.38 27836.38 30420.38 33004.38
5 18469.38 20917.38 23365.38 25813.38 28261.38 30709.38
6 16854.38 19166.38 21478.38 23790.38 26102.38 28414.38
7 15239.38 17415.38 19591.38 21767.38 23943.38 26119.38
8 13624.38 15664.38 17704.38 19744.38 21784.38 23824.38</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar yield Rev17 Rev18 Rev19 Rev20 Rev21 Rev22 Rev23 Total Cost    rolac17
17    0.6   816 13872 14688 15504 16320 17136 17952 18768   14788.62  -916.6174
18    0.5   680 11560 12240 12920 13600 14280 14960 15640   14090.62 -2530.6174
19    0.4   544  9248  9792 10336 10880 11424 11968 12512   13392.62 -4144.6174
20    0.3   408  6936  7344  7752  8160  8568  8976  9384   12694.62 -5758.6174
21    0.2   272  4624  4896  5168  5440  5712  5984  6256   11996.62 -7372.6174
22    0.1   136  2312  2448  2584  2720  2856  2992  3128   11298.62 -8986.6174
      rolac18    rolac19    rolac20    rolac21    rolac22    rolac23
17  -100.6174   715.3826  1531.3826  2347.3826  3163.3826  3979.3826
18 -1850.6174 -1170.6174  -490.6174   189.3826   869.3826  1549.3826
19 -3600.6174 -3056.6174 -2512.6174 -1968.6174 -1424.6174  -880.6174
20 -5350.6174 -4942.6174 -4534.6174 -4126.6174 -3718.6174 -3310.6174
21 -7100.6174 -6828.6174 -6556.6174 -6284.6174 -6012.6174 -5740.6174
22 -8850.6174 -8714.6174 -8578.6174 -8442.6174 -8306.6174 -8170.6174
   Operator Cost     rlc17      rlc18       rlc19      rlc20      rlc21
17           810 -1726.617  -910.6174   -94.61736   721.3826  1537.3826
18           675 -3205.617 -2525.6174 -1845.61736 -1165.6174  -485.6174
19           540 -4684.617 -4140.6174 -3596.61736 -3052.6174 -2508.6174
20           405 -6163.617 -5755.6174 -5347.61736 -4939.6174 -4531.6174
21           270 -7642.617 -7370.6174 -7098.61736 -6826.6174 -6554.6174
22           135 -9121.617 -8985.6174 -8849.61736 -8713.6174 -8577.6174
        rlc22     rlc223
17  2353.3826  3169.3826
18   194.3826   874.3826
19 -1964.6174 -1420.6174
20 -4123.6174 -3715.6174
21 -6282.6174 -6010.6174
22 -8441.6174 -8305.6174</code></pre>
</div>
</div>
</section>
<section id="strawberry" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="strawberry"><span class="header-section-number">2.2</span> Strawberry</h2>
<ul>
<li><p>Everything same as tomato.</p></li>
<li><p>Numbers 3 to 9 in names are price ranges for strawberry.</p></li>
<li><p>Comment: Fix revenue table. This calculation is incorrect.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>strawberry <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"Parameters.xlsx"</span>,</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sheet =</span> <span class="st">"Strawberry"</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">start_row =</span> <span class="dv">2</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">start_col =</span> <span class="dv">7</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">skip_empty_rows =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">skip_empty_cols =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">col_names =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">yield =</span> Yield,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">yldvar =</span> <span class="st">`</span><span class="at">Yield Variation (%)</span><span class="st">`</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(strawberry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(strawberry); <span class="fu">tail</span>(strawberry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar  yield    Rev3  Rev4    Rev5   Rev6    Rev7    Rev8    Rev9 Total Cost
3    2.0 6150.0 18450.0 24600 30750.0 147600 43050.0 1180800 55350.0   20190.49
4    1.9 5842.5 17527.5 23370 29212.5 140220 40897.5 1121760 52582.5   19844.85
5    1.8 5535.0 16605.0 22140 27675.0 132840 38745.0 1062720 49815.0   19499.20
6    1.7 5227.5 15682.5 20910 26137.5 125460 36592.5 1003680 47047.5   19153.56
7    1.6 4920.0 14760.0 19680 24600.0 118080 34440.0  944640 44280.0   18807.91
8    1.5 4612.5 13837.5 18450 23062.5 110700 32287.5  885600 41512.5   18462.27
     rolac3    rolac4     rolac5    rolac6    rolac7   rolac8    rolac9
3 -14040.49 -1740.495 4409.50503 10559.505 127409.51 22859.51 1160609.5
4 -14002.35 -2317.350 3525.15003  9367.650 120375.15 21052.65 1101915.2
5 -13964.20 -2894.205 2640.79503  8175.795 113340.80 19245.80 1043220.8
6 -13926.06 -3471.060 1756.44003  6983.940 106306.44 17438.94  984526.4
7 -13887.91 -4047.915  872.08503  5792.085  99272.09 15632.09  925832.1
8 -13849.77 -4624.770  -12.26997  4600.230  92237.73 13825.23  867137.7
  Operator Cost      rlc3      rlc4      rlc5     rlc6      rlc7     rlc8
3          2700 -16740.49 -4440.495  1709.505 7859.505 124709.51 20159.51
4          2565 -16567.35 -4882.350   960.150 6802.650 117810.15 18487.65
5          2430 -16394.20 -5324.205   210.795 5745.795 110910.80 16815.80
6          2295 -16221.06 -5766.060  -538.560 4688.940 104011.44 15143.94
7          2160 -16047.91 -6207.915 -1287.915 3632.085  97112.09 13472.09
8          2025 -15874.77 -6649.770 -2037.270 2575.230  90212.73 11800.23
       rlc9
3 1157909.5
4 1099350.2
5 1040790.8
6  982231.4
7  923672.1
8  865112.7</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar  yield   Rev3 Rev4   Rev5  Rev6    Rev7   Rev8    Rev9 Total Cost
17    0.6 1845.0 5535.0 7380 9225.0 44280 12915.0 354240 16605.0   15351.46
18    0.5 1537.5 4612.5 6150 7687.5 36900 10762.5 295200 13837.5   15005.82
19    0.4 1230.0 3690.0 4920 6150.0 29520  8610.0 236160 11070.0   14660.17
20    0.3  922.5 2767.5 3690 4612.5 22140  6457.5 177120  8302.5   14314.53
21    0.2  615.0 1845.0 2460 3075.0 14760  4305.0 118080  5535.0   13968.88
22    0.1  307.5  922.5 1230 1537.5  7380  2152.5  59040  2767.5   13623.24
      rolac3     rolac4     rolac5     rolac6    rolac7     rolac8    rolac9
17 -13506.46  -9816.465  -7971.465  -6126.465 28928.535  -2436.465 338888.54
18 -13468.32 -10393.320  -8855.820  -7318.320 21894.180  -4243.320 280194.18
19 -13430.17 -10970.175  -9740.175  -8510.175 14859.825  -6050.175 221499.83
20 -13392.03 -11547.030 -10624.530  -9702.030  7825.470  -7857.030 162805.47
21 -13353.88 -12123.885 -11508.885 -10893.885   791.115  -9663.885 104111.12
22 -13315.74 -12700.740 -12393.240 -12085.740 -6243.240 -11470.740  45416.76
   Operator Cost      rlc3      rlc4       rlc5       rlc6      rlc7       rlc8
17           810 -14316.46 -10626.46  -8781.465  -6936.465 28118.535  -3246.465
18           675 -14143.32 -11068.32  -9530.820  -7993.320 21219.180  -4918.320
19           540 -13970.17 -11510.17 -10280.175  -9050.175 14319.825  -6590.175
20           405 -13797.03 -11952.03 -11029.530 -10107.030  7420.470  -8262.030
21           270 -13623.88 -12393.88 -11778.885 -11163.885   521.115  -9933.885
22           135 -13450.74 -12835.74 -12528.240 -12220.740 -6378.240 -11605.740
        rlc9
17 338078.54
18 279519.18
19 220959.83
20 162400.47
21 103841.12
22  45281.76</code></pre>
</div>
</div>
</section>
<section id="squash" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="squash"><span class="header-section-number">2.3</span> Squash</h2>
<ul>
<li><p>Everything same as tomato and strawberry.</p></li>
<li><p>Numbers 11 to 17 in names are price ranges for squash.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>squash <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"Parameters.xlsx"</span>,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">sheet =</span> <span class="st">"Squash"</span>,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">start_row =</span> <span class="dv">2</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">start_col =</span> <span class="dv">8</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">skip_empty_rows =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">skip_empty_cols =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">col_names =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">yield =</span> Yield,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">yldvar =</span> <span class="st">`</span><span class="at">Yield Variation (%)</span><span class="st">`</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(squash)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(squash); <span class="fu">tail</span>(squash)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar yield Rev11 Rev12 Rev13 Rev14 Rev15 Rev16 Rev17 Total Cost  rolac11
3    2.0  2180 23980 26160 26160 30520 32700 34880 37060   13670.88 10309.12
4    1.9  2071 23980 24852 24852 28994 31065 33136 35207   13173.63 10806.37
5    1.8  1962 23980 23544 23544 27468 29430 31392 33354   12676.38 11303.62
6    1.7  1853 23980 22236 22236 25942 27795 29648 31501   12179.13 11800.87
7    1.6  1744 23980 20928 20928 24416 26160 27904 29648   11681.88 12298.12
8    1.5  1635 23980 19620 19620 22890 24525 26160 27795   11184.63 12795.37
    rolac12   rolac13  rolac14  rolac15  rolac16  rolac17 Operator Cost
3 12489.117 12489.117 16849.12 19029.12 21209.12 23389.12          2700
4 11678.367 11678.367 15820.37 17891.37 19962.37 22033.37          2565
5 10867.617 10867.617 14791.62 16753.62 18715.62 20677.62          2430
6 10056.867 10056.867 13762.87 15615.87 17468.87 19321.87          2295
7  9246.117  9246.117 12734.12 14478.12 16222.12 17966.12          2160
8  8435.367  8435.367 11705.37 13340.37 14975.37 16610.37          2025
      rlc11    rlc12    rlc13     rlc14    rlc15    rlc16    rlc17
3  7609.117 9789.117 9789.117 14149.117 16329.12 18509.12 20689.12
4  8241.367 9113.367 9113.367 13255.367 15326.37 17397.37 19468.37
5  8873.617 8437.617 8437.617 12361.617 14323.62 16285.62 18247.62
6  9505.867 7761.867 7761.867 11467.867 13320.87 15173.87 17026.87
7 10138.117 7086.117 7086.117 10574.117 12318.12 14062.12 15806.12
8 10770.367 6410.367 6410.367  9680.367 11315.37 12950.37 14585.37</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar yield Rev11 Rev12 Rev13 Rev14 Rev15 Rev16 Rev17 Total Cost  rolac11
17    0.6   654 23980  7848  7848  9156  9810 10464 11118   6709.383 17270.62
18    0.5   545 23980  6540  6540  7630  8175  8720  9265   6212.133 17767.87
19    0.4   436 23980  5232  5232  6104  6540  6976  7412   5714.883 18265.12
20    0.3   327 23980  3924  3924  4578  4905  5232  5559   5217.633 18762.37
21    0.2   218 23980  2616  2616  3052  3270  3488  3706   4720.383 19259.62
22    0.1   109 23980  1308  1308  1526  1635  1744  1853   4223.133 19756.87
     rolac12   rolac13   rolac14   rolac15     rolac16   rolac17 Operator Cost
17  1138.617  1138.617  2446.617  3100.617  3754.61702  4408.617           810
18   327.867   327.867  1417.867  1962.867  2507.86702  3052.867           675
19  -482.883  -482.883   389.117   825.117  1261.11702  1697.117           540
20 -1293.633 -1293.633  -639.633  -312.633    14.36702   341.367           405
21 -2104.383 -2104.383 -1668.383 -1450.383 -1232.38298 -1014.383           270
22 -2915.133 -2915.133 -2697.133 -2588.133 -2479.13298 -2370.133           135
      rlc11     rlc12     rlc13     rlc14     rlc15     rlc16       rlc17
17 16460.62   328.617   328.617  1636.617  2290.617  2944.617  3598.61702
18 17092.87  -347.133  -347.133   742.867  1287.867  1832.867  2377.86702
19 17725.12 -1022.883 -1022.883  -150.883   285.117   721.117  1157.11702
20 18357.37 -1698.633 -1698.633 -1044.633  -717.633  -390.633   -63.63298
21 18989.62 -2374.383 -2374.383 -1938.383 -1720.383 -1502.383 -1284.38298
22 19621.87 -3050.133 -3050.133 -2832.133 -2723.133 -2614.133 -2505.13298</code></pre>
</div>
</div>
</section>
<section id="electricity-price" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="electricity-price"><span class="header-section-number">2.4</span> Electricity price</h2>
<p>Electricity price ($/kWh) is retail electricity price range for Alabama based on retail electricity price in April 2023 and April 2024 taken from <a href="https://www.eia.gov/electricity/monthly/epm_table_grapher.php?t=epmt_5_6_a">DOE Database</a>. Retail electricity price range in Alabama was from 6.44 to 15.85 cents/kWh in April 2023 and April 2024 which represents industry, commercial, and residential prices.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>elec_price <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"Parameters.xlsx"</span>,</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">sheet =</span> <span class="st">"Electricity Price"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">epr_kwh =</span> <span class="st">`</span><span class="at">Electricity Price ($/kWh)</span><span class="st">`</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(elec_price)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11  1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>elec_price</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   epr_kwh
2    0.010
3    0.015
4    0.020
5    0.025
6    0.030
7    0.035
8    0.040
9    0.045
10   0.050
11   0.055
12   0.060</code></pre>
</div>
</div>
</section>
<section id="pv-system-cost" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="pv-system-cost"><span class="header-section-number">2.5</span> PV system cost</h2>
<ul>
<li>Data taken from “<a href="https://www.nrel.gov/docs/fy21osti/77811.pdf" class="uri">Capital Costs for Dual-Use Photovoltaic Installations: 2020 Benchmark</a>” Table 1 and Figure 3.</li>
<li>This data was used to estimate CAPEX.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>pvsc <span class="ot">&lt;-</span> <span class="fu">wb_read</span>(<span class="at">file =</span> <span class="st">"Parameters.xlsx"</span>,</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">sheet =</span> <span class="st">"PV system Cost (NREL)"</span>,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">rows =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">109</span>),</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">cols =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>),</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">col_names =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">avtyps =</span> <span class="st">`</span><span class="at">AV Types</span><span class="st">`</span>,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">item =</span> Item,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">cost =</span> <span class="st">`</span><span class="at">Cost ($/W)</span><span class="st">`</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">height =</span> <span class="st">`</span><span class="at">Panel Height (ft.)</span><span class="st">`</span>,</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">tcost =</span> <span class="st">`</span><span class="at">Total Cost ($/W)</span><span class="st">`</span>)</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(pvsc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 108   5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pvsc); <span class="fu">tail</span>(pvsc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            avtyps                     item cost height tcost
2 Typical Fixed PV EPC/Developer Net Profit 0.11    4.6  1.53
3 Typical Fixed PV       Developer Overhead 0.15    4.6  1.53
4 Typical Fixed PV          Contingency(3%) 0.05    4.6  1.53
5 Typical Fixed PV      Interconnection Fee 0.03    4.6  1.53
6 Typical Fixed PV  Permitting Fee (if any) 0.02    4.6  1.53
7 Typical Fixed PV        Sale Tax (if any) 0.05    4.6  1.53</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                   avtyps                        item cost
104 PV + Crops (Reinforced Regular Mount)                EPC Overhead 0.25
105 PV + Crops (Reinforced Regular Mount) Installation and Labor Cost 0.32
106 PV + Crops (Reinforced Regular Mount)              Electrical BOS 0.38
107 PV + Crops (Reinforced Regular Mount)              Structural BOS 0.32
108 PV + Crops (Reinforced Regular Mount)               Inverter Only 0.08
109 PV + Crops (Reinforced Regular Mount)                      Module 0.40
    height tcost
104    8.2  2.33
105    8.2  2.33
106    8.2  2.33
107    8.2  2.33
108    8.2  2.33
109    8.2  2.33</code></pre>
</div>
</div>
</section>
<section id="capex-nrel" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="capex-nrel"><span class="header-section-number">2.6</span> Capex (NREL)</h2>
<p>Variable Descriptions:</p>
<ul>
<li><p>Capex: Capital investment cost ($/W) to develop solar energy system. Capex includes cost of physical structure, developer’s overhead and EPC/Developer’s net profit.</p></li>
<li><p>capex = f(height, tracker) using OLS.</p></li>
<li><p>Height = ground to panel clearance in ft.</p></li>
<li><p>array: Solar array. Tracker = Single axis sun tracking panels; Fixed = Non-tracking panels.</p></li>
<li><p>kwcapex = Capex converted to $/kW.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>capex <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">"CAPEX.txt"</span>,</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sep =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">capex =</span> cost,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">height =</span> pheight,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">array =</span> tracker)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(capex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>capex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  height    capex    array
1    4.6 1.593333    Fixed
2    4.6 1.733333 Tracking
3    6.4 1.850000    Fixed
4    8.2 2.330000    Fixed
5    8.2 2.110000 Tracking
6    6.4 1.921667 Tracking</code></pre>
</div>
</div>
<section id="plotting-capex" class="level3" data-number="2.6.1">
<h3 data-number="2.6.1" class="anchored" data-anchor-id="plotting-capex"><span class="header-section-number">2.6.1</span> Plotting capex</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>plottheme <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="at">data =</span> capex,</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping =</span> (<span class="fu">aes</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">x =</span> height,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> capex,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> array,</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">group =</span> array))) <span class="sc">+</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_text(aes(label = "Tracker"),</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#           nudge_x = 0.05,</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#           nudge_y = 0.05,</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#           size = 6) +</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"CAPEX Cost by Solar Panel Height"</span>,</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Panel Height (ft.)"</span>,</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"CAPEX Cost ($/W)"</span>,</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Array"</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">4.5</span>, <span class="fl">8.5</span>)) <span class="sc">+</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">1.5</span>, <span class="fl">2.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="panel-configuration" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="panel-configuration"><span class="header-section-number">2.7</span> Panel Configuration</h2>
<ul>
<li>Panel configuration and DV system output (W)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>panconf <span class="ot">&lt;-</span> <span class="fu">wb_read</span>(<span class="at">file =</span> <span class="st">"Parameters.xlsx"</span>,</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">sheet =</span> <span class="st">"Panel Spacing"</span>,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">start_row =</span> <span class="dv">2</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">start_col =</span> <span class="dv">1</span>,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">skip_empty_rows =</span> <span class="cn">TRUE</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">skip_empty_cols =</span> <span class="cn">TRUE</span>,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename(avtyps = `AV Types`,</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#        item = Item,</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#        cost = `Cost ($/W)`,</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#        height = `Panel Height (ft.)`,</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#        tcost = `Total Cost ($/W)`)</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(panconf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11 18</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#names(panconf)</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">#panconf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="energy-output" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="energy-output"><span class="header-section-number">2.8</span> Energy output</h2>
<p>Energy output was simulated using NREL <a href="https://pvwatts.nrel.gov/pvwatts.php" class="uri">PV Watts Calculator</a>.</p>
<ul>
<li><p>Panels = Total number of panels in 1 acres of land.</p></li>
<li><p>datalot: 1 = first simulation done for four regions of AL; 2 = second simulation done for four regions of AL. Two simulations have two unique zipcodes for each simulated region.</p></li>
<li><p>al_regs = regions of Alabama</p></li>
<li><p>zips = zipcodes selected from each region of AL for simulation.</p></li>
<li><p>array = Fixed (open rack); 1AxisRot = 1 Axis Tracking. See above NREL tool for more detail.</p></li>
<li><p>dc_kw = DC system size, calculated for each solar panel heights considering solar panels efficiency and area covered by solar panels.</p></li>
<li><p>energy = total energy output ( kWh/Year) considering system parameters. Total hours considered by the model is 8,760 (See <a href="https://pvwatts.nrel.gov/pvwatts.php" class="uri">PV Watts Calculator</a> Results &gt; help (below the result) &gt; results &gt; download monthly or hourly results).</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>energy_output <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"Parameters.xlsx"</span>,</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">sheet =</span> <span class="st">"Energy Output"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">panels =</span> TotalPanels,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">datalot =</span> DataLot,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">al_regs =</span> <span class="st">`</span><span class="at">Region of AL</span><span class="st">`</span>,</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">zips =</span> ZIPCODE,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">array =</span> <span class="st">`</span><span class="at">Array Type</span><span class="st">`</span>,</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">dc_kw =</span> <span class="st">`</span><span class="at">DC Size (kW)</span><span class="st">`</span>,</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">energy =</span> <span class="st">`</span><span class="at">Energy (kWh/Year)</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dc_kw =</span> (<span class="fu">round</span>(dc_kw,<span class="dv">2</span>)),</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">array =</span> <span class="fu">case_when</span>(</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>           array <span class="sc">==</span> <span class="st">"1AxisRot"</span> <span class="sc">~</span> <span class="st">"Tracking"</span>,</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>           array <span class="sc">==</span> <span class="st">"FixedOpen"</span> <span class="sc">~</span> <span class="st">"Fixed"</span>,</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>           <span class="cn">TRUE</span> <span class="sc">~</span> array))</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter(datalot == 2)</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(energy_output)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 176   7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(energy_output); <span class="fu">tail</span>(energy_output)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  panels datalot  al_regs  zips array  dc_kw  energy
2   1534       2 Northern 35769 Fixed 768.90 1041584
3   1416       2 Northern 35769 Fixed 692.01  937427
4   1239       2 Northern 35769 Fixed 615.12  833269
5   1062       2 Northern 35769 Fixed 538.23  729112
6    944       2 Northern 35769 Fixed 461.34  624955
7    767       2 Northern 35769 Fixed 384.45  520797</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>    panels datalot  al_regs  zips    array  dc_kw energy
172    767       1 Southern 36525 Tracking 384.45 615098
173    590       1 Southern 36525 Tracking 307.56 492082
174    472       1 Southern 36525 Tracking 230.67 369068
175    295       1 Southern 36525 Tracking 153.78 246051
176    118       1 Southern 36525 Tracking  76.89 106008
177      0       1 Southern 36525 Tracking   0.00      0</code></pre>
</div>
</div>
<section id="energy-output-by-solar-panels-counts" class="level3" data-number="2.8.1">
<h3 data-number="2.8.1" class="anchored" data-anchor-id="energy-output-by-solar-panels-counts"><span class="header-section-number">2.8.1</span> Energy output by solar panels counts</h3>
<p>Plotting Energy output by number of solar panels in one acres of AV system from fixed and single axis rotation system for two zipcodes (1, 2) within each of the four regions of AL.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>lox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>array_levs <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Single Axis Rotation"</span>, <span class="st">"Fixed Open Rack"</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>datalot_levs <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Location 1"</span>, <span class="st">"Location 2"</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> energy_output,</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> al_regs,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> energy,</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>                       <span class="co">#fill = energy,</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> <span class="fu">factor</span>(panels),</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">group =</span> <span class="fu">factor</span>(panels))) <span class="sc">+</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(datalot<span class="sc">~</span>array) <span class="sc">+</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> lox)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="energy-output-by-dc-system-size" class="level3" data-number="2.8.2">
<h3 data-number="2.8.2" class="anchored" data-anchor-id="energy-output-by-dc-system-size"><span class="header-section-number">2.8.2</span> Energy output by DC System Size</h3>
<p>Plotting Energy output by DC System Size from fixed and single axis rotation system for two zipcodes (1, 2) within each of the four regions of AL.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> energy_output,</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> al_regs,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> energy,</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>                       <span class="co">#fill = energy,</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> <span class="fu">factor</span>(dc_kw),</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">group =</span> <span class="fu">factor</span>(dc_kw))) <span class="sc">+</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(datalot<span class="sc">~</span>array) <span class="sc">+</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> lox)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="revenue-from-energy" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Revenue from energy</h1>
<section id="simulation-1" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="simulation-1"><span class="header-section-number">3.1</span> Simulation 1</h2>
<ul>
<li><p>elcprc = electricity price. See Electricity price data for more detail.</p></li>
<li><p>elcrev = Revenue from electricity for given electricity prices. There are 176*11 = 1396 rows in this data. See “energy output” and “electricity price” dataset for more details.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to data frames if they are not already</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>matrix1 <span class="ot">&lt;-</span> energy_output <span class="co"># dimension of matrix is 176*7</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>matrix2 <span class="ot">&lt;-</span> elec_price <span class="co"># dimension of matrix is 11*1</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the result data frame</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="co">#energy_revenue &lt;- data.frame(matrix(nrow = 1936, ncol = 9))</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>energy_revenue <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="fu">nrow</span>(matrix2)<span class="sc">*</span><span class="fu">nrow</span>(matrix1),</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">ncol =</span> <span class="dv">9</span>))</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable to keep track of the row index in the result matrix</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>row_index <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each value of the second matrix</span></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(matrix2)) {</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Loop through each value of the second matrix</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(matrix1)) {</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># First matrix, second matrix, combined two matrices.</span></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>    new_row <span class="ot">&lt;-</span> <span class="fu">c</span>(matrix1[j, ], matrix2[i, <span class="dv">1</span>], matrix1[j, <span class="dv">7</span>] <span class="sc">*</span> matrix2[i, <span class="dv">1</span>])</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Assign the new row to the result matrix</span></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>    energy_revenue[row_index, ] <span class="ot">&lt;-</span> new_row</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Increment the row index</span></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>    row_index <span class="ot">&lt;-</span> row_index <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Name the columns</span></span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(energy_revenue) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">colnames</span>(matrix1), <span class="st">"elcprc"</span>, <span class="st">"elcrev"</span>)</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the result</span></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(energy_revenue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1936    9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(energy_revenue); <span class="fu">tail</span>(energy_revenue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  panels datalot  al_regs  zips array  dc_kw  energy elcprc   elcrev
1   1534       2 Northern 35769 Fixed 768.90 1041584   0.01 10415.84
2   1416       2 Northern 35769 Fixed 692.01  937427   0.01  9374.27
3   1239       2 Northern 35769 Fixed 615.12  833269   0.01  8332.69
4   1062       2 Northern 35769 Fixed 538.23  729112   0.01  7291.12
5    944       2 Northern 35769 Fixed 461.34  624955   0.01  6249.55
6    767       2 Northern 35769 Fixed 384.45  520797   0.01  5207.97</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     panels datalot  al_regs  zips    array  dc_kw energy elcprc   elcrev
1931    767       1 Southern 36525 Tracking 384.45 615098   0.06 36905.88
1932    590       1 Southern 36525 Tracking 307.56 492082   0.06 29524.92
1933    472       1 Southern 36525 Tracking 230.67 369068   0.06 22144.08
1934    295       1 Southern 36525 Tracking 153.78 246051   0.06 14763.06
1935    118       1 Southern 36525 Tracking  76.89 106008   0.06  6360.48
1936      0       1 Southern 36525 Tracking   0.00      0   0.06     0.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # Check for any NAs in the result</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co"># if(any(is.na(energy_revenue))) {</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   na_indices &lt;- which(is.na(energy_revenue), arr.ind = TRUE)</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(paste("NAs found at rows:", unique(na_indices[, 1])))</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co"># } else {</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   print("No NAs found in the result data frame.")</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co"># }</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="simulation-2" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="simulation-2"><span class="header-section-number">3.2</span> Simulation 2</h2>
<p>This simulation has same result as above (Cross checking above code and output). Code and results are suppressed but errors and warnings are not. No error and no warnings means code is working as it should.</p>
</section>
<section id="plotting-revenue-from-energy-production" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="plotting-revenue-from-energy-production"><span class="header-section-number">3.3</span> Plotting revenue from energy production</h2>
<p>I am using data from simulation 1 for this visualization. This code plots one chart per electricity cost. There are 11 electricity cost resulting into 11 charts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>lox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>array_levs <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Single Axis Rotation"</span>, <span class="st">"Fixed Open Rack"</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>datalot_levs <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Location 1"</span>, <span class="st">"Location 2"</span>)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">unique</span>(energy_revenue<span class="sc">$</span>elcprc)) {</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a> a <span class="ot">=</span> <span class="fu">ggplot</span>(<span class="at">data =</span> (energy_revenue <span class="sc">%&gt;%</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(elcprc <span class="sc">==</span> i)),</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span>al_regs,</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> elcrev,</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>                       <span class="co">#fill = energy,</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> <span class="fu">factor</span>(panels),</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>                       <span class="at">group =</span> <span class="fu">factor</span>(panels)))<span class="sc">+</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(datalot<span class="sc">~</span>array) <span class="sc">+</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> lox)</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a> <span class="fu">cat</span>(<span class="st">"Electricity Price = "</span>, i)</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a> <span class="fu">print</span>(a)</span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.01</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.015</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.02</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.025</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.03</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.035</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.04</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.045</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.05</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.055</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Electricity Price =  0.06</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-19-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="solar-system-cost" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Solar system cost</h1>
<ul>
<li><p>Cost of solar energy system in agrivoltaic setting.</p></li>
<li><p>I used DC system size (dc_kw) and capex ($/W) to get total cost for each height and panel tracking system.</p></li>
<li><p>1 kw dc system size costs x$ CAPEX for given height and tracking system.</p></li>
<li><p>y kw dc system size costs $x*y for given height and tracking system.</p></li>
<li><p>Use simulation 1 data and capex data to get solar system cost.</p></li>
<li><p>There should be 1936*3 = 5808 rows in this dataset.</p></li>
<li><p>height = height of solar panels; see capex dataset for details.</p></li>
<li><p>capex = capex from capex table; see capex dataset for details.</p></li>
<li><p>ttlcost = Total cost for given DC system size.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>expanded_data <span class="ot">&lt;-</span> energy_revenue <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>(),</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">each =</span> <span class="dv">3</span>))</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>capex_height <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">unique</span>(capex<span class="sc">$</span>height),</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">length.out =</span> <span class="fu">nrow</span>(energy_revenue))</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>energy_cost <span class="ot">=</span> <span class="fu">cbind</span>(expanded_data, capex_height) <span class="sc">%&gt;%</span> </span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">height =</span> capex_height)</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>energy_cost <span class="ot">&lt;-</span> <span class="fu">left_join</span>(energy_cost, </span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>                         capex, </span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"array"</span>, <span class="st">"height"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ttlcost =</span> capex<span class="sc">*</span>dc_kw) <span class="co">#Convert $ in kW</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(energy_cost)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5808   12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(energy_cost); <span class="fu">tail</span>(energy_cost)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  panels datalot  al_regs  zips array  dc_kw  energy elcprc   elcrev height
1   1534       2 Northern 35769 Fixed 768.90 1041584   0.01 10415.84    4.6
2   1534       2 Northern 35769 Fixed 768.90 1041584   0.01 10415.84    6.4
3   1534       2 Northern 35769 Fixed 768.90 1041584   0.01 10415.84    8.2
4   1416       2 Northern 35769 Fixed 692.01  937427   0.01  9374.27    4.6
5   1416       2 Northern 35769 Fixed 692.01  937427   0.01  9374.27    6.4
6   1416       2 Northern 35769 Fixed 692.01  937427   0.01  9374.27    8.2
     capex  ttlcost
1 1.593333 1225.114
2 1.850000 1422.465
3 2.330000 1791.537
4 1.593333 1102.603
5 1.850000 1280.218
6 2.330000 1612.383</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     panels datalot  al_regs  zips    array dc_kw energy elcprc  elcrev height
5803    118       1 Southern 36525 Tracking 76.89 106008   0.06 6360.48    6.4
5804    118       1 Southern 36525 Tracking 76.89 106008   0.06 6360.48    8.2
5805    118       1 Southern 36525 Tracking 76.89 106008   0.06 6360.48    4.6
5806      0       1 Southern 36525 Tracking  0.00      0   0.06    0.00    6.4
5807      0       1 Southern 36525 Tracking  0.00      0   0.06    0.00    8.2
5808      0       1 Southern 36525 Tracking  0.00      0   0.06    0.00    4.6
        capex  ttlcost
5803 1.921667 147.7570
5804 2.110000 162.2379
5805 1.733333 133.2760
5806 1.921667   0.0000
5807 2.110000   0.0000
5808 1.733333   0.0000</code></pre>
</div>
</div>
</section>
<section id="profit-from-solar" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Profit from solar</h1>
<p>Profit from solar energy system in agrivoltaic setting</p>
<ul>
<li>eprofit = profit from electricity after subtracting total cost (ttlcost) from total revenue (elcrev).</li>
<li>Comments: Subtract annual maintenance cost and annualized CAPEX for 25 years at 5% interest rate.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>solar_profit <span class="ot">&lt;-</span> energy_cost <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">eprofit =</span> elcrev <span class="sc">-</span> ttlcost)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(solar_profit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5808   13</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(solar_profit); <span class="fu">tail</span>(solar_profit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  panels datalot  al_regs  zips array  dc_kw  energy elcprc   elcrev height
1   1534       2 Northern 35769 Fixed 768.90 1041584   0.01 10415.84    4.6
2   1534       2 Northern 35769 Fixed 768.90 1041584   0.01 10415.84    6.4
3   1534       2 Northern 35769 Fixed 768.90 1041584   0.01 10415.84    8.2
4   1416       2 Northern 35769 Fixed 692.01  937427   0.01  9374.27    4.6
5   1416       2 Northern 35769 Fixed 692.01  937427   0.01  9374.27    6.4
6   1416       2 Northern 35769 Fixed 692.01  937427   0.01  9374.27    8.2
     capex  ttlcost  eprofit
1 1.593333 1225.114 9190.726
2 1.850000 1422.465 8993.375
3 2.330000 1791.537 8624.303
4 1.593333 1102.603 8271.667
5 1.850000 1280.218 8094.052
6 2.330000 1612.383 7761.887</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     panels datalot  al_regs  zips    array dc_kw energy elcprc  elcrev height
5803    118       1 Southern 36525 Tracking 76.89 106008   0.06 6360.48    6.4
5804    118       1 Southern 36525 Tracking 76.89 106008   0.06 6360.48    8.2
5805    118       1 Southern 36525 Tracking 76.89 106008   0.06 6360.48    4.6
5806      0       1 Southern 36525 Tracking  0.00      0   0.06    0.00    6.4
5807      0       1 Southern 36525 Tracking  0.00      0   0.06    0.00    8.2
5808      0       1 Southern 36525 Tracking  0.00      0   0.06    0.00    4.6
        capex  ttlcost  eprofit
5803 1.921667 147.7570 6212.723
5804 2.110000 162.2379 6198.242
5805 1.733333 133.2760 6227.204
5806 1.921667   0.0000    0.000
5807 2.110000   0.0000    0.000
5808 1.733333   0.0000    0.000</code></pre>
</div>
</div>
<section id="plot-profit-from-solar" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="plot-profit-from-solar"><span class="header-section-number">5.1</span> Plot profit from solar</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>lox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>array_levs <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Single Axis Rotation"</span>, <span class="st">"Fixed Open Rack"</span>)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>datalot_levs <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Location 1"</span>, <span class="st">"Location 2"</span>)</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">unique</span>(solar_profit<span class="sc">$</span>datalot)) {</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="fu">unique</span>(solar_profit<span class="sc">$</span>elcprc)) {</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">=</span> <span class="fu">ggplot</span>(</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> (solar_profit <span class="sc">%&gt;%</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(datalot <span class="sc">==</span> i, elcprc <span class="sc">==</span> j)),</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> al_regs,</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> eprofit,</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">#fill = energy,</span></span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="fu">factor</span>(panels),</span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="fu">factor</span>(panels)</span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">facet_grid</span>(height <span class="sc">~</span> array) <span class="sc">+</span></span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> lox)</span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Datalot = "</span>, i, <span class="st">"and "</span>)</span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Electricity Price = "</span>, j)</span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(b)</span>
<span id="cb76-24"><a href="#cb76-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb76-25"><a href="#cb76-25" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.01</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.015</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.02</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.025</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.03</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.035</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.04</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.045</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.05</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.055</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  2 and Electricity Price =  0.06</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.01</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.015</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.02</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.025</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.03</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.035</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.04</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.045</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.05</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.055</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Datalot =  1 and Electricity Price =  0.06</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Choice-Paper_files/figure-html/unnamed-chunk-23-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="profit-from-crops" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Profit from crops</h1>
<section id="tomato-1" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="tomato-1"><span class="header-section-number">6.1</span> Tomato</h2>
<p>Filter return to operator, land and capital profit from Tomato:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>tomato_profit <span class="ot">=</span> tomato <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(yldvar, yield, </span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>         rolac17, rolac18, rolac19, rolac20, rolac21, rolac22, rolac23)</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(tomato_profit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20  9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>tomato_profit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar yield    rolac17    rolac18    rolac19    rolac20    rolac21
3     2.0  2720 21679.3826 24399.3826 27119.3826 29839.3826 32559.3826
4     1.9  2584 20065.3826 22649.3826 25233.3826 27817.3826 30401.3826
5     1.8  2448 18451.3826 20899.3826 23347.3826 25795.3826 28243.3826
6     1.7  2312 16837.3826 19149.3826 21461.3826 23773.3826 26085.3826
7     1.6  2176 15223.3826 17399.3826 19575.3826 21751.3826 23927.3826
8     1.5  2040 13609.3826 15649.3826 17689.3826 19729.3826 21769.3826
9     1.4  1904 11995.3826 13899.3826 15803.3826 17707.3826 19611.3826
10    1.3  1768 10381.3826 12149.3826 13917.3826 15685.3826 17453.3826
11    1.2  1632  8767.3826 10399.3826 12031.3826 13663.3826 15295.3826
12    1.1  1496  7153.3826  8649.3826 10145.3826 11641.3826 13137.3826
13    1.0  1360  5539.3826  6899.3826  8259.3826  9619.3826 10979.3826
14    0.9  1224  3925.3826  5149.3826  6373.3826  7597.3826  8821.3826
15    0.8  1088  2311.3826  3399.3826  4487.3826  5575.3826  6663.3826
16    0.7   952   697.3826  1649.3826  2601.3826  3553.3826  4505.3826
17    0.6   816  -916.6174  -100.6174   715.3826  1531.3826  2347.3826
18    0.5   680 -2530.6174 -1850.6174 -1170.6174  -490.6174   189.3826
19    0.4   544 -4144.6174 -3600.6174 -3056.6174 -2512.6174 -1968.6174
20    0.3   408 -5758.6174 -5350.6174 -4942.6174 -4534.6174 -4126.6174
21    0.2   272 -7372.6174 -7100.6174 -6828.6174 -6556.6174 -6284.6174
22    0.1   136 -8986.6174 -8850.6174 -8714.6174 -8578.6174 -8442.6174
      rolac22    rolac23
3  35279.3826 37999.3826
4  32985.3826 35569.3826
5  30691.3826 33139.3826
6  28397.3826 30709.3826
7  26103.3826 28279.3826
8  23809.3826 25849.3826
9  21515.3826 23419.3826
10 19221.3826 20989.3826
11 16927.3826 18559.3826
12 14633.3826 16129.3826
13 12339.3826 13699.3826
14 10045.3826 11269.3826
15  7751.3826  8839.3826
16  5457.3826  6409.3826
17  3163.3826  3979.3826
18   869.3826  1549.3826
19 -1424.6174  -880.6174
20 -3718.6174 -3310.6174
21 -6012.6174 -5740.6174
22 -8306.6174 -8170.6174</code></pre>
</div>
</div>
<p>Convert data to long format:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign column names for clarity</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tomato_profit) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"yldvar"</span>, <span class="st">"yield"</span>,</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"rolac17"</span>, <span class="st">"rolac18"</span>, <span class="st">"rolac19"</span>,</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"rolac20"</span>, <span class="st">"rolac21"</span>, <span class="st">"rolac22"</span>,</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"rolac23"</span>)</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape the data frame from wide to long format</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>tomato_long <span class="ot">&lt;-</span> <span class="fu">melt</span>(tomato_profit,</span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">id.vars =</span> <span class="fu">c</span>(<span class="st">"yldvar"</span>, <span class="st">"yield"</span>),</span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">measure.vars =</span> <span class="fu">c</span>(<span class="st">"rolac17"</span>, <span class="st">"rolac18"</span>, <span class="st">"rolac19"</span>,</span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"rolac20"</span>, <span class="st">"rolac21"</span>, <span class="st">"rolac22"</span>,</span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"rolac23"</span>),</span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">variable.name =</span> <span class="st">"Price"</span>,</span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">value.name =</span> <span class="st">"Profit"</span>)</span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-16"><a href="#cb103-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the 'Price' column to numeric by extracting the number</span></span>
<span id="cb103-17"><a href="#cb103-17" aria-hidden="true" tabindex="-1"></a>tomato_long<span class="sc">$</span>Price <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"rolac"</span>, <span class="st">""</span>, tomato_long<span class="sc">$</span>Price))</span>
<span id="cb103-18"><a href="#cb103-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-19"><a href="#cb103-19" aria-hidden="true" tabindex="-1"></a><span class="co"># View the resulting data frame</span></span>
<span id="cb103-20"><a href="#cb103-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(tomato_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 140   4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tomato_long); <span class="fu">tail</span>(tomato_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar yield Price   Profit
1    2.0  2720    17 21679.38
2    1.9  2584    17 20065.38
3    1.8  2448    17 18451.38
4    1.7  2312    17 16837.38
5    1.6  2176    17 15223.38
6    1.5  2040    17 13609.38</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>    yldvar yield Price     Profit
135    0.6   816    23  3979.3826
136    0.5   680    23  1549.3826
137    0.4   544    23  -880.6174
138    0.3   408    23 -3310.6174
139    0.2   272    23 -5740.6174
140    0.1   136    23 -8170.6174</code></pre>
</div>
</div>
</section>
<section id="strawberry-1" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="strawberry-1"><span class="header-section-number">6.2</span> Strawberry</h2>
<p>Filter return to operator, land and capital profit from strawberry</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>strawberry_profit <span class="ot">=</span> strawberry <span class="sc">%&gt;%</span> </span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(yldvar, yield, </span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>         rolac3, rolac4, rolac5, rolac6, rolac7, rolac8, rolac9)</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(strawberry_profit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20  9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>strawberry_profit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar  yield    rolac3     rolac4       rolac5     rolac6     rolac7
3     2.0 6150.0 -14040.49  -1740.495   4409.50503  10559.505 127409.505
4     1.9 5842.5 -14002.35  -2317.350   3525.15003   9367.650 120375.150
5     1.8 5535.0 -13964.20  -2894.205   2640.79503   8175.795 113340.795
6     1.7 5227.5 -13926.06  -3471.060   1756.44003   6983.940 106306.440
7     1.6 4920.0 -13887.91  -4047.915    872.08503   5792.085  99272.085
8     1.5 4612.5 -13849.77  -4624.770    -12.26997   4600.230  92237.730
9     1.4 4305.0 -13811.62  -5201.625   -896.62497   3408.375  85203.375
10    1.3 3997.5 -13773.48  -5778.480  -1780.97997   2216.520  78169.020
11    1.2 3690.0 -13735.33  -6355.335  -2665.33497   1024.665  71134.665
12    1.1 3382.5 -13697.19  -6932.190  -3549.68997   -167.190  64100.310
13    1.0 3075.0 -13659.04  -7509.045  -4434.04497  -1359.045  57065.955
14    0.9 2767.5 -13620.90  -8085.900  -5318.39997  -2550.900  50031.600
15    0.8 2460.0 -13582.75  -8662.755  -6202.75497  -3742.755  42997.245
16    0.7 2152.5 -13544.61  -9239.610  -7087.10997  -4934.610  35962.890
17    0.6 1845.0 -13506.46  -9816.465  -7971.46497  -6126.465  28928.535
18    0.5 1537.5 -13468.32 -10393.320  -8855.81997  -7318.320  21894.180
19    0.4 1230.0 -13430.17 -10970.175  -9740.17497  -8510.175  14859.825
20    0.3  922.5 -13392.03 -11547.030 -10624.52997  -9702.030   7825.470
21    0.2  615.0 -13353.88 -12123.885 -11508.88497 -10893.885    791.115
22    0.1  307.5 -13315.74 -12700.740 -12393.23997 -12085.740  -6243.240
       rolac8     rolac9
3   22859.505 1160609.51
4   21052.650 1101915.15
5   19245.795 1043220.80
6   17438.940  984526.44
7   15632.085  925832.09
8   13825.230  867137.73
9   12018.375  808443.38
10  10211.520  749749.02
11   8404.665  691054.67
12   6597.810  632360.31
13   4790.955  573665.96
14   2984.100  514971.60
15   1177.245  456277.25
16   -629.610  397582.89
17  -2436.465  338888.54
18  -4243.320  280194.18
19  -6050.175  221499.83
20  -7857.030  162805.47
21  -9663.885  104111.12
22 -11470.740   45416.76</code></pre>
</div>
</div>
<p>Convert data to long format:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign column names for clarity</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(strawberry_profit) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"yldvar"</span>, <span class="st">"yield"</span>,</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"rolac3"</span>, <span class="st">"rolac4"</span>, <span class="st">"rolac5"</span>,</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"rolac6"</span>, <span class="st">"rolac7"</span>, <span class="st">"rolac8"</span>,</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"rolac9"</span>)</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape the data frame from wide to long format</span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>stberry_long <span class="ot">&lt;-</span> <span class="fu">melt</span>(strawberry_profit,</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">id.vars =</span> <span class="fu">c</span>(<span class="st">"yldvar"</span>, <span class="st">"yield"</span>),</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">measure.vars =</span> <span class="fu">c</span>(<span class="st">"rolac3"</span>, <span class="st">"rolac4"</span>, <span class="st">"rolac5"</span>,</span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"rolac6"</span>, <span class="st">"rolac7"</span>, <span class="st">"rolac8"</span>,</span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"rolac9"</span>),</span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">variable.name =</span> <span class="st">"Price"</span>,</span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">value.name =</span> <span class="st">"Profit"</span>)</span>
<span id="cb112-14"><a href="#cb112-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-15"><a href="#cb112-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the 'Price' column to numeric by extracting the number</span></span>
<span id="cb112-16"><a href="#cb112-16" aria-hidden="true" tabindex="-1"></a>stberry_long<span class="sc">$</span>Price <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"rolac"</span>, <span class="st">""</span>, stberry_long<span class="sc">$</span>Price))</span>
<span id="cb112-17"><a href="#cb112-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-18"><a href="#cb112-18" aria-hidden="true" tabindex="-1"></a><span class="co"># View the resulting data frame</span></span>
<span id="cb112-19"><a href="#cb112-19" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(stberry_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 140   4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(stberry_long); <span class="fu">tail</span>(stberry_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar  yield Price    Profit
1    2.0 6150.0     3 -14040.49
2    1.9 5842.5     3 -14002.35
3    1.8 5535.0     3 -13964.20
4    1.7 5227.5     3 -13926.06
5    1.6 4920.0     3 -13887.91
6    1.5 4612.5     3 -13849.77</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>    yldvar  yield Price    Profit
135    0.6 1845.0     9 338888.54
136    0.5 1537.5     9 280194.18
137    0.4 1230.0     9 221499.83
138    0.3  922.5     9 162805.47
139    0.2  615.0     9 104111.12
140    0.1  307.5     9  45416.76</code></pre>
</div>
</div>
</section>
<section id="squash-1" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="squash-1"><span class="header-section-number">6.3</span> Squash</h2>
<p>Filter return to operator, land and capital profit from squash</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>squash_profit <span class="ot">=</span> squash <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(yldvar, yield, </span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>         rolac11, rolac12, rolac13, rolac14, rolac15, rolac16, rolac17)</span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>squash_profit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar yield  rolac11   rolac12   rolac13   rolac14   rolac15     rolac16
3     2.0  2180 10309.12 12489.117 12489.117 16849.117 19029.117 21209.11702
4     1.9  2071 10806.37 11678.367 11678.367 15820.367 17891.367 19962.36702
5     1.8  1962 11303.62 10867.617 10867.617 14791.617 16753.617 18715.61702
6     1.7  1853 11800.87 10056.867 10056.867 13762.867 15615.867 17468.86702
7     1.6  1744 12298.12  9246.117  9246.117 12734.117 14478.117 16222.11702
8     1.5  1635 12795.37  8435.367  8435.367 11705.367 13340.367 14975.36702
9     1.4  1526 13292.62  7624.617  7624.617 10676.617 12202.617 13728.61702
10    1.3  1417 13789.87  6813.867  6813.867  9647.867 11064.867 12481.86702
11    1.2  1308 14287.12  6003.117  6003.117  8619.117  9927.117 11235.11702
12    1.1  1199 14784.37  5192.367  5192.367  7590.367  8789.367  9988.36702
13    1.0  1090 15281.62  4381.617  4381.617  6561.617  7651.617  8741.61702
14    0.9   981 15778.87  3570.867  3570.867  5532.867  6513.867  7494.86702
15    0.8   872 16276.12  2760.117  2760.117  4504.117  5376.117  6248.11702
16    0.7   763 16773.37  1949.367  1949.367  3475.367  4238.367  5001.36702
17    0.6   654 17270.62  1138.617  1138.617  2446.617  3100.617  3754.61702
18    0.5   545 17767.87   327.867   327.867  1417.867  1962.867  2507.86702
19    0.4   436 18265.12  -482.883  -482.883   389.117   825.117  1261.11702
20    0.3   327 18762.37 -1293.633 -1293.633  -639.633  -312.633    14.36702
21    0.2   218 19259.62 -2104.383 -2104.383 -1668.383 -1450.383 -1232.38298
22    0.1   109 19756.87 -2915.133 -2915.133 -2697.133 -2588.133 -2479.13298
     rolac17
3  23389.117
4  22033.367
5  20677.617
6  19321.867
7  17966.117
8  16610.367
9  15254.617
10 13898.867
11 12543.117
12 11187.367
13  9831.617
14  8475.867
15  7120.117
16  5764.367
17  4408.617
18  3052.867
19  1697.117
20   341.367
21 -1014.383
22 -2370.133</code></pre>
</div>
</div>
<p>Convert data to long format:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign column names for clarity</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(squash_profit) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"yldvar"</span>, <span class="st">"yield"</span>,</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"rolac11"</span>, <span class="st">"rolac12"</span>, <span class="st">"rolac13"</span>,</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"rolac14"</span>, <span class="st">"rolac15"</span>, <span class="st">"rolac16"</span>,</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"rolac17"</span>)</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape the data frame from wide to long format</span></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>squash_long <span class="ot">&lt;-</span> <span class="fu">melt</span>(squash_profit,</span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">id.vars =</span> <span class="fu">c</span>(<span class="st">"yldvar"</span>, <span class="st">"yield"</span>),</span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">measure.vars =</span> <span class="fu">c</span>(<span class="st">"rolac11"</span>, <span class="st">"rolac12"</span>, <span class="st">"rolac13"</span>,</span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"rolac14"</span>, <span class="st">"rolac15"</span>, <span class="st">"rolac16"</span>,</span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"rolac17"</span>),</span>
<span id="cb119-13"><a href="#cb119-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">variable.name =</span> <span class="st">"Price"</span>,</span>
<span id="cb119-14"><a href="#cb119-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">value.name =</span> <span class="st">"Profit"</span>)</span>
<span id="cb119-15"><a href="#cb119-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-16"><a href="#cb119-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the 'Price' column to numeric by extracting the number</span></span>
<span id="cb119-17"><a href="#cb119-17" aria-hidden="true" tabindex="-1"></a>squash_long<span class="sc">$</span>Price <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"rolac"</span>, <span class="st">""</span>, squash_long<span class="sc">$</span>Price))</span>
<span id="cb119-18"><a href="#cb119-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-19"><a href="#cb119-19" aria-hidden="true" tabindex="-1"></a><span class="co"># View the resulting data frame</span></span>
<span id="cb119-20"><a href="#cb119-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(squash_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 140   4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(squash_long); <span class="fu">tail</span>(squash_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar yield Price   Profit
1    2.0  2180    11 10309.12
2    1.9  2071    11 10806.37
3    1.8  1962    11 11303.62
4    1.7  1853    11 11800.87
5    1.6  1744    11 12298.12
6    1.5  1635    11 12795.37</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>    yldvar yield Price    Profit
135    0.6   654    17  4408.617
136    0.5   545    17  3052.867
137    0.4   436    17  1697.117
138    0.3   327    17   341.367
139    0.2   218    17 -1014.383
140    0.1   109    17 -2370.133</code></pre>
</div>
</div>
</section>
</section>
<section id="profit-from-agrivoltaics" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Profit from agrivoltaics</h1>
<p>Total profit from solar and crops for all combinations of AVs simulated.</p>
<section id="profit-from-tomato-agrivoltaic-system" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="profit-from-tomato-agrivoltaic-system"><span class="header-section-number">7.1</span> Profit from tomato agrivoltaic system</h2>
<p>Joint profit from tomato (tomato_long) and solar energy production (solar_profit) from 1 acre of land.</p>
<p>WORK ON PROGRESS. NOT THE FINAL RESULT AND CODE</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="do">## | results='hide'</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample data</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>matrix1 <span class="ot">&lt;-</span> energy_output <span class="co"># dimension of matrix is 176*7</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>matrix2 <span class="ot">&lt;-</span> elec_price <span class="co"># dimension of matrix is 11*1</span></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Initializing the result matrix</span></span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a>result_matrix <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="dv">9</span>, <span class="at">nrow =</span> <span class="dv">0</span>))</span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(result_matrix) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">colnames</span>(matrix1),  <span class="st">"elcrev"</span>, <span class="st">"elcprc"</span>)</span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop to multiply first and second matrices</span></span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(matrix2)) {</span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a>  temp_matrix <span class="ot">&lt;-</span> matrix1</span>
<span id="cb124-14"><a href="#cb124-14" aria-hidden="true" tabindex="-1"></a>  temp_matrix<span class="sc">$</span>E_Prc <span class="ot">&lt;-</span> matrix2[i, <span class="dv">1</span>]</span>
<span id="cb124-15"><a href="#cb124-15" aria-hidden="true" tabindex="-1"></a>  temp_matrix<span class="sc">$</span>E_Rev <span class="ot">&lt;-</span> matrix2[i, <span class="dv">1</span>] <span class="sc">*</span> matrix1[, <span class="dv">7</span>]</span>
<span id="cb124-16"><a href="#cb124-16" aria-hidden="true" tabindex="-1"></a>  result_matrix <span class="ot">&lt;-</span> <span class="fu">rbind</span>(result_matrix, temp_matrix)</span>
<span id="cb124-17"><a href="#cb124-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb124-18"><a href="#cb124-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-19"><a href="#cb124-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the resulting matrix</span></span>
<span id="cb124-20"><a href="#cb124-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(result_matrix)</span>
<span id="cb124-21"><a href="#cb124-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(result_matrix); <span class="fu">tail</span>(result_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="profit-from-strawberry-agrivoltaic-system" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="profit-from-strawberry-agrivoltaic-system"><span class="header-section-number">7.2</span> Profit from strawberry agrivoltaic system</h2>
<p>Joint profit from strawberry (stberry_long) and solar energy production (solar_profit) from 1 acre of land.</p>
<p>WORK ON PROGRESS. NOT THE FINAL RESULT AND CODE</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="do">## | results='hide'</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample data</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>matrix1 <span class="ot">&lt;-</span> energy_output <span class="co"># dimension of matrix is 176*7</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>matrix2 <span class="ot">&lt;-</span> elec_price <span class="co"># dimension of matrix is 11*1</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Initializing the result matrix</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>result_matrix <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="dv">9</span>, <span class="at">nrow =</span> <span class="dv">0</span>))</span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(result_matrix) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">colnames</span>(matrix1),  <span class="st">"elcrev"</span>, <span class="st">"elcprc"</span>)</span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop to multiply first and second matrices</span></span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(matrix2)) {</span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a>  temp_matrix <span class="ot">&lt;-</span> matrix1</span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a>  temp_matrix<span class="sc">$</span>E_Prc <span class="ot">&lt;-</span> matrix2[i, <span class="dv">1</span>]</span>
<span id="cb125-15"><a href="#cb125-15" aria-hidden="true" tabindex="-1"></a>  temp_matrix<span class="sc">$</span>E_Rev <span class="ot">&lt;-</span> matrix2[i, <span class="dv">1</span>] <span class="sc">*</span> matrix1[, <span class="dv">7</span>]</span>
<span id="cb125-16"><a href="#cb125-16" aria-hidden="true" tabindex="-1"></a>  result_matrix <span class="ot">&lt;-</span> <span class="fu">rbind</span>(result_matrix, temp_matrix)</span>
<span id="cb125-17"><a href="#cb125-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb125-18"><a href="#cb125-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-19"><a href="#cb125-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the resulting matrix</span></span>
<span id="cb125-20"><a href="#cb125-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(result_matrix)</span>
<span id="cb125-21"><a href="#cb125-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(result_matrix); <span class="fu">tail</span>(result_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="profit-from-squash-agrivoltaic-system" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="profit-from-squash-agrivoltaic-system"><span class="header-section-number">7.3</span> Profit from squash agrivoltaic system</h2>
<p>Joint profit from squash (squash_long) and solar energy production (solar_profit) from 1 acre of land.</p>
<p>WORK ON PROGRESS. NOT THE FINAL RESULT AND CODE</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="do">## | results='hide'</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample data</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>matrix1 <span class="ot">&lt;-</span> energy_output <span class="co"># dimension of matrix is 176*7</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>matrix2 <span class="ot">&lt;-</span> elec_price <span class="co"># dimension of matrix is 11*1</span></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Initializing the result matrix</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>result_matrix <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="dv">9</span>, <span class="at">nrow =</span> <span class="dv">0</span>))</span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(result_matrix) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">colnames</span>(matrix1),  <span class="st">"elcrev"</span>, <span class="st">"elcprc"</span>)</span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop to multiply first and second matrices</span></span>
<span id="cb126-12"><a href="#cb126-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(matrix2)) {</span>
<span id="cb126-13"><a href="#cb126-13" aria-hidden="true" tabindex="-1"></a>  temp_matrix <span class="ot">&lt;-</span> matrix1</span>
<span id="cb126-14"><a href="#cb126-14" aria-hidden="true" tabindex="-1"></a>  temp_matrix<span class="sc">$</span>E_Prc <span class="ot">&lt;-</span> matrix2[i, <span class="dv">1</span>]</span>
<span id="cb126-15"><a href="#cb126-15" aria-hidden="true" tabindex="-1"></a>  temp_matrix<span class="sc">$</span>E_Rev <span class="ot">&lt;-</span> matrix2[i, <span class="dv">1</span>] <span class="sc">*</span> matrix1[, <span class="dv">7</span>]</span>
<span id="cb126-16"><a href="#cb126-16" aria-hidden="true" tabindex="-1"></a>  result_matrix <span class="ot">&lt;-</span> <span class="fu">rbind</span>(result_matrix, temp_matrix)</span>
<span id="cb126-17"><a href="#cb126-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb126-18"><a href="#cb126-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-19"><a href="#cb126-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the resulting matrix</span></span>
<span id="cb126-20"><a href="#cb126-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(result_matrix)</span>
<span id="cb126-21"><a href="#cb126-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(result_matrix); <span class="fu">tail</span>(result_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>