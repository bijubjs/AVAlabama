<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Bijesh Mishra, Ph.D.">

<title>AV Profit</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="AV Profit_files/libs/clipboard/clipboard.min.js"></script>
<script src="AV Profit_files/libs/quarto-html/quarto.js"></script>
<script src="AV Profit_files/libs/quarto-html/popper.min.js"></script>
<script src="AV Profit_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="AV Profit_files/libs/quarto-html/anchor.min.js"></script>
<link href="AV Profit_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="AV Profit_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="AV Profit_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="AV Profit_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="AV Profit_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setting-up" id="toc-setting-up" class="nav-link active" data-scroll-target="#setting-up"><span class="header-section-number">1</span> Setting Up</a>
  <ul class="collapse">
  <li><a href="#housekeeping" id="toc-housekeeping" class="nav-link" data-scroll-target="#housekeeping"><span class="header-section-number">1.1</span> Housekeeping</a></li>
  <li><a href="#working-directory" id="toc-working-directory" class="nav-link" data-scroll-target="#working-directory"><span class="header-section-number">1.2</span> Working directory</a></li>
  <li><a href="#load-libraries" id="toc-load-libraries" class="nav-link" data-scroll-target="#load-libraries"><span class="header-section-number">1.3</span> Load libraries</a></li>
  <li><a href="#theme-for-plots" id="toc-theme-for-plots" class="nav-link" data-scroll-target="#theme-for-plots"><span class="header-section-number">1.4</span> Theme for plots</a></li>
  </ul></li>
  <li><a href="#import-data" id="toc-import-data" class="nav-link" data-scroll-target="#import-data"><span class="header-section-number">2</span> Import data</a>
  <ul class="collapse">
  <li><a href="#tomato-av" id="toc-tomato-av" class="nav-link" data-scroll-target="#tomato-av"><span class="header-section-number">2.1</span> Tomato AV</a></li>
  <li><a href="#strawberry-av" id="toc-strawberry-av" class="nav-link" data-scroll-target="#strawberry-av"><span class="header-section-number">2.2</span> Strawberry AV</a></li>
  <li><a href="#squash-av" id="toc-squash-av" class="nav-link" data-scroll-target="#squash-av"><span class="header-section-number">2.3</span> Squash AV</a></li>
  </ul></li>
  <li><a href="#tabulating-and-plotting-results" id="toc-tabulating-and-plotting-results" class="nav-link" data-scroll-target="#tabulating-and-plotting-results"><span class="header-section-number">3</span> Tabulating and Plotting Results</a>
  <ul class="collapse">
  <li><a href="#tomato-av-1" id="toc-tomato-av-1" class="nav-link" data-scroll-target="#tomato-av-1"><span class="header-section-number">3.1</span> Tomato AV</a>
  <ul class="collapse">
  <li><a href="#plotting-tomato-profits-by-solar-proportions" id="toc-plotting-tomato-profits-by-solar-proportions" class="nav-link" data-scroll-target="#plotting-tomato-profits-by-solar-proportions"><span class="header-section-number">3.1.1</span> Plotting Tomato Profits by Solar Proportions</a></li>
  <li><a href="#plotting-tomato-profits-by-yield-variation" id="toc-plotting-tomato-profits-by-yield-variation" class="nav-link" data-scroll-target="#plotting-tomato-profits-by-yield-variation"><span class="header-section-number">3.1.2</span> Plotting Tomato Profits by Yield Variation:</a></li>
  </ul></li>
  <li><a href="#strawberry-av-1" id="toc-strawberry-av-1" class="nav-link" data-scroll-target="#strawberry-av-1"><span class="header-section-number">3.2</span> Strawberry AV</a>
  <ul class="collapse">
  <li><a href="#plotting-strawberry-profit-by-solar-proportion" id="toc-plotting-strawberry-profit-by-solar-proportion" class="nav-link" data-scroll-target="#plotting-strawberry-profit-by-solar-proportion"><span class="header-section-number">3.2.1</span> Plotting Strawberry Profit by Solar Proportion</a></li>
  <li><a href="#plotting-strawberry-profit-by-yield-variation" id="toc-plotting-strawberry-profit-by-yield-variation" class="nav-link" data-scroll-target="#plotting-strawberry-profit-by-yield-variation"><span class="header-section-number">3.2.2</span> Plotting Strawberry Profit by Yield Variation</a></li>
  </ul></li>
  <li><a href="#squash-av-1" id="toc-squash-av-1" class="nav-link" data-scroll-target="#squash-av-1"><span class="header-section-number">3.3</span> Squash AV</a>
  <ul class="collapse">
  <li><a href="#plotting-squash-profit-by-solar-proportion" id="toc-plotting-squash-profit-by-solar-proportion" class="nav-link" data-scroll-target="#plotting-squash-profit-by-solar-proportion"><span class="header-section-number">3.3.1</span> Plotting Squash Profit by Solar Proportion</a></li>
  <li><a href="#plotting-squash-profit-by-yield-variation" id="toc-plotting-squash-profit-by-yield-variation" class="nav-link" data-scroll-target="#plotting-squash-profit-by-yield-variation"><span class="header-section-number">3.3.2</span> Plotting Squash Profit by Yield Variation</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="AV-Profit.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="AV Profit.ipynb" download="AV Profit.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">AV Profit</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Bijesh Mishra, Ph.D. </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div style="page-break-after: always;"></div>
<p>Analysis in this file start by loading data saved after simulating tomato, strawberry, and squash AV profits. See simulation file for more details. The result tables I have here are quite big. Results are summarized in separate excel file (Results.xlsx).</p>
<section id="setting-up" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Setting Up</h1>
<section id="housekeeping" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="housekeeping"><span class="header-section-number">1.1</span> Housekeeping</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #| echo: TRUE</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) <span class="co"># Clean the environment.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">warn=</span><span class="dv">0</span>, <span class="co"># Warnings. options(warn=-1) / options(warn=0)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">scipen=</span><span class="dv">999</span> <span class="co"># No scientific notations.</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="working-directory" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="working-directory"><span class="header-section-number">1.2</span> Working directory</h2>
<p>Codes and output are suppressed. Errors and warnings are visible. No warning and no error means code is working as it should.</p>
</section>
<section id="load-libraries" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="load-libraries"><span class="header-section-number">1.3</span> Load libraries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(likert,  <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Likert Items</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mice,  <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx2, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Scatter plot</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gmodels,  <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Crosstab</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Reshape data</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman,  <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Package Management</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(progress, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Progress bar</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arrow, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># Feather</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Some features are not enabled in this build of Arrow. Run `arrow_info()` for more information.
The repository you retrieved Arrow from did not include all of Arrow's features.
You can install a fully-featured version by running:
`install.packages('arrow', repos = 'https://apache.r-universe.dev')`.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plot3D, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in fun(libname, pkgname): couldn't connect to display ":0"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="co"># 3D plotting</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lattice, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#pacman::p_loaded()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="theme-for-plots" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="theme-for-plots"><span class="header-section-number">1.4</span> Theme for plots</h2>
<p>Setting theme for plots:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">####### Plotting Data: #####</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Map Theme:</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>plottheme <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mapping theme:</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">r =</span> <span class="dv">0</span>, </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">b =</span> <span class="dv">0</span>, </span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>                             <span class="at">l =</span> <span class="dv">0</span>, </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>                             <span class="at">unit =</span> <span class="st">"cm"</span>),</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, </span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"lightgrey"</span>,</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"lightgrey"</span>,</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"grey"</span>,</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"grey"</span>,</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.x.top =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.y.right =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">linetype =</span> <span class="dv">2</span>,</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.x.bottom =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linetype =</span> <span class="dv">1</span>,</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.y.left =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linetype =</span> <span class="dv">1</span>,</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linewidth =</span> <span class="dv">0</span>),</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Text formatting:</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"serif"</span>, <span class="co"># font</span></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>                            <span class="at">size =</span> <span class="dv">12</span>, <span class="co"># font size</span></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>                            <span class="at">colour =</span> <span class="st">"black"</span><span class="co"># font color</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.95</span>, <span class="sc">-</span><span class="fl">0.05</span>),</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">"black"</span>, </span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">fill =</span> <span class="cn">NA</span>, </span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">linewidth =</span> <span class="fl">0.05</span>, </span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">linetype =</span> <span class="dv">1</span>),</span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"right"</span>,</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="import-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Import data</h1>
<p>Import necessary data.</p>
<section id="tomato-av" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="tomato-av"><span class="header-section-number">2.1</span> Tomato AV</h2>
<p>Parameters defining agrivoltaic systems:</p>
<ul>
<li><p>sprop = proportion of solar in agrivoltaic system (0 to 1 in 0.5 increment.) Length = 21.</p></li>
<li><p>al_regs = four regions of Alabama. Northern, Central, Black Belt, Southern. Length = 4.</p></li>
<li><p>array = Solar array; Sun tracking (Tracking) and non-tracking (Fixed). Length = 2.</p></li>
<li><p>elecprc = electricity price (1 cents to 6 cents). Length = 6.</p></li>
<li><p>height = clearance height of solar panels. 4.6 ft., 6.4 ft., and 8.2 ft. Length = 3.</p></li>
<li><p>yldvar = crop yield variation (10% to 200%) = Length 21.</p></li>
<li><p>yield = crop yield variation based on yldvar. (same as yldvar) = Length = 21.</p></li>
</ul>
<p>Calculated results using above parameters:</p>
<ul>
<li><p>dc_kw = DC system size (kW) See <a href="https://pvwatts.nrel.gov/pvwatts.php">PVWatts® Calculator</a>.</p></li>
<li><p>panels = number of solar panels.</p></li>
<li><p>energy = total energy generated from solar system. See: <a href="https://pvwatts.nrel.gov/pvwatts.php">PVWatts® Calculator</a>.</p></li>
<li><p>capex = AV system capex per kW. See: <a href="https://www.nrel.gov/docs/fy21osti/77811.pdf">Capex Cost for AV</a> table 1 and table 3.</p></li>
<li><p>ttlcost = total solar system cost in AV. See: <a href="https://www.nrel.gov/docs/fy21osti/77811.pdf">Capex Cost for AV</a> table 1 and table 3.</p></li>
<li><p>anncost = annualized total cost.</p></li>
<li><p>moncost = monthly total cost.</p></li>
<li><p>price = crop yield price per bucket.</p></li>
</ul>
<!-- -->
<ul>
<li>eprofit = profit from electricity.</li>
</ul>
<p>Result of Interests:</p>
<ul>
<li><p>eannprof = annualized total profit from electricity.</p></li>
<li><p>emonprof = monthly total profit from electricity.</p></li>
</ul>
<!-- -->
<ul>
<li><p>profit = profit from crops.</p></li>
<li><p>tav_profit = total profit from solar and tomato.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>tav_profit <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">read_feather</span>(<span class="at">file =</span> <span class="st">"tav_profit.feather"</span>))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#str(tav_profit)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">#head(tav_profit); head(tav_profit)</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(tav_profit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 776160     21</code></pre>
</div>
</div>
</section>
<section id="strawberry-av" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="strawberry-av"><span class="header-section-number">2.2</span> Strawberry AV</h2>
<p>See tomato for variable descriptions.</p>
<p>sbav_profit = total profit from solar and strawberry.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>sbav_profit <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">read_feather</span>(<span class="at">file =</span> <span class="st">"sbav_profit.feather"</span>))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#str(sbav_profit)</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#head(sbav_profit); tail(sbav_profit)</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(sbav_profit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 776160     21</code></pre>
</div>
</div>
</section>
<section id="squash-av" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="squash-av"><span class="header-section-number">2.3</span> Squash AV</h2>
<p>See tomato for variable descriptions.</p>
<p>sqav_profit = total profit from solar and squash.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>sqav_profit <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">read_feather</span>(<span class="at">file =</span> <span class="st">"sqav_profit.feather"</span>))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#str(sqav_profit)</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#head(sqav_profit); tail(sqav_profit)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(sqav_profit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 776160     21</code></pre>
</div>
</div>
</section>
</section>
<section id="tabulating-and-plotting-results" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Tabulating and Plotting Results</h1>
<section id="tomato-av-1" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="tomato-av-1"><span class="header-section-number">3.1</span> Tomato AV</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the values for each variable</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>sprop <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="fl">1.00</span>) <span class="co"># Land Proportion</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>array <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Fixed"</span>, <span class="st">"Tracking"</span>) <span class="co"># Solar Array</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>height <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">4.6</span>, <span class="fl">6.4</span>, <span class="fl">8.2</span>) <span class="co"># Panel height</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>yldvar <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.30</span>, <span class="fl">0.50</span>, <span class="fl">0.70</span>, <span class="fl">1.00</span>, <span class="fl">1.20</span>, <span class="fl">1.50</span>, <span class="fl">1.80</span>, <span class="fl">2.00</span>) <span class="co"># Crop Yield Variation</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>al_regs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>) <span class="co"># Regions of AL</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>price <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">17</span>, <span class="dv">20</span>, <span class="dv">23</span>) <span class="co"># Crop Price</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>elcprc <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.02</span>, <span class="fl">0.03</span>, <span class="fl">0.04</span>) <span class="co"># Electricity Price</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the required columns</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>required_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"sprop"</span>, <span class="st">"array"</span>, <span class="st">"height"</span>, </span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"al_regs"</span>, <span class="st">"yldvar"</span>, <span class="st">"price"</span>, <span class="st">"elcprc"</span>)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if the columns exist in tav_profit</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>missing_columns <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(required_columns, </span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">names</span>(tav_profit))</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(missing_columns) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"Missing columns in tav_profit: "</span>,</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>       <span class="fu">paste</span>(missing_columns, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate column names using reversed order of expand.grid</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>col_names <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="fu">expand.grid</span>(height, array, sprop), <span class="dv">1</span>,</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>                   <span class="cf">function</span>(x) <span class="fu">paste0</span>(x[<span class="dv">3</span>], <span class="st">"%_"</span>, x[<span class="dv">2</span>], <span class="st">"_"</span>, x[<span class="dv">1</span>]))</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate row names using reversed order of expand.grid</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>row_names <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="fu">expand.grid</span>(elcprc, </span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>                               price,</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>                               yldvar, </span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>                               al_regs), <span class="dv">1</span>, </span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>                   <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="at">collapse =</span> <span class="st">"_"</span>))</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty matrix to store the results</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>result_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, <span class="at">nrow =</span> <span class="fu">length</span>(row_names), </span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>                        <span class="at">ncol =</span> <span class="fu">length</span>(col_names))</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(result_matrix) <span class="ot">&lt;-</span> col_names</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(result_matrix) <span class="ot">&lt;-</span> row_names</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with </span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a><span class="co"># all combinations of parameters in reversed order</span></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>param_combinations <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">elcprc =</span> elcprc, </span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">price =</span> price, </span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">yldvar =</span> yldvar, </span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">al_regs =</span> al_regs,</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">height =</span> height, </span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">array =</span> array, </span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sprop =</span> sprop)</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with tav_profit to get tav_profit values for each combination</span></span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> <span class="fu">merge</span>(param_combinations, </span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>                     tav_profit, </span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>                     <span class="at">by =</span> required_columns,</span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>                     <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape merged_data to fill result_matrix with </span></span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a><span class="co"># reversed column and row names</span></span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>merged_data<span class="sc">$</span>col_name <span class="ot">&lt;-</span> <span class="fu">apply</span>(</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>  merged_data[, <span class="fu">c</span>(<span class="st">"sprop"</span>, <span class="st">"array"</span>, <span class="st">"height"</span>)], <span class="dv">1</span>,</span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">paste0</span>(x[<span class="dv">1</span>], <span class="st">"%_"</span>, x[<span class="dv">2</span>], <span class="st">"_"</span>, x[<span class="dv">3</span>]))</span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a>merged_data<span class="sc">$</span>row_name <span class="ot">&lt;-</span> <span class="fu">apply</span>(</span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>  merged_data[, <span class="fu">c</span>(<span class="st">"al_regs"</span>, <span class="st">"yldvar"</span>, <span class="st">"price"</span>, <span class="st">"elcprc"</span>)], <span class="dv">1</span>,</span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">paste0</span>(x[<span class="dv">4</span>], <span class="st">"_"</span>,</span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>                     x[<span class="dv">3</span>], <span class="st">"_"</span>,</span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a>                     x[<span class="dv">2</span>], <span class="st">"_"</span>, x[<span class="dv">1</span>]))</span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill the matrix with tav_profit values</span></span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(result_matrix))) {</span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a>  row_condition <span class="ot">&lt;-</span> <span class="fu">rownames</span>(result_matrix)[i]</span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a>  row_data <span class="ot">&lt;-</span> merged_data[</span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a>    merged_data<span class="sc">$</span>row_name <span class="sc">==</span> row_condition, ]</span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(row_data) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb17-73"><a href="#cb17-73" aria-hidden="true" tabindex="-1"></a>    result_matrix[i, </span>
<span id="cb17-74"><a href="#cb17-74" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">match</span>(row_data<span class="sc">$</span>col_name, </span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">colnames</span>(result_matrix))] <span class="ot">&lt;-</span> <span class="fu">round</span>(</span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a>                          row_data<span class="sc">$</span>tav_profit, <span class="dv">2</span>)</span>
<span id="cb17-77"><a href="#cb17-77" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-78"><a href="#cb17-78" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-79"><a href="#cb17-79" aria-hidden="true" tabindex="-1"></a>tav_chtbl <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(result_matrix) <span class="co">#Table in Excel.</span></span>
<span id="cb17-80"><a href="#cb17-80" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(result_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="fu">as.data.frame</span>(tav_chtbl),</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">row.names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>          <span class="co">#col.names = TRUE,</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">file =</span> <span class="st">"tav_chtbl.csv"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(tav_chtbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 324  30</code></pre>
</div>
</div>
<ul>
<li><p>Row naming: Electricity Price_Crop Price_Solar Proportion_Alabama Regions</p></li>
<li><p>Column naming: Solar Proportion_Array Types_Solar Panel Height.</p></li>
<li><p>Solar Proportion can be converted to total number of panels.</p></li>
<li><p>Only selected values from each variables are extracted for tabulation purpose.</p></li>
<li><p>Values displayed in the table are profit from Tomato AV system.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the result matrix</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#head(tav_chtbl)</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#tail(tav_chtbl)</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(tav_profit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "sprop"      "al_regs"    "array"      "dc_kw"      "panels"    
 [6] "energy"     "elcprc"     "elcrev"     "height"     "capex"     
[11] "ttlcost"    "anncost"    "moncost"    "eprofit"    "eannprof"  
[16] "emonprof"   "yldvar"     "yield"      "price"      "profit"    
[21] "tav_profit"</code></pre>
</div>
</div>
<section id="plotting-tomato-profits-by-solar-proportions" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="plotting-tomato-profits-by-solar-proportions"><span class="header-section-number">3.1.1</span> Plotting Tomato Profits by Solar Proportions</h3>
<p>You can see plot breakdown based on yield variation, crop price, and electricity price. You can see variation for all solar proportion in one facet of the chart. Each facet of the chart contain av profit three heights of solar panels, four regions of AL, two array types.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>lox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>array_levs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Single Axis Rotation"</span>, <span class="st">"Fixed Open Rack"</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>combinations <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">yldvar =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span>, <span class="dv">1</span>, <span class="fl">1.20</span>, <span class="fl">1.5</span>, <span class="fl">1.80</span>, <span class="dv">2</span>), <span class="co"># Yield proportion</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">price =</span> <span class="fu">c</span>(<span class="dv">17</span>, <span class="dv">20</span>, <span class="dv">23</span>), <span class="co"># Tomato price</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">elcprc =</span> <span class="fu">c</span>(<span class="fl">0.03</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span>) <span class="co">#Electricity price</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over the combinations and create the plots</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (combo <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(combinations))) {</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  filtered_data <span class="ot">&lt;-</span> tav_profit <span class="sc">%&gt;%</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>      yldvar <span class="sc">==</span> combinations<span class="sc">$</span>yldvar[combo],</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>      price <span class="sc">==</span> combinations<span class="sc">$</span>price[combo],</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>      elcprc <span class="sc">==</span> combinations<span class="sc">$</span>elcprc[combo]</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  tav_sp_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> filtered_data,</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> al_regs,</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">y =</span> tav_profit,</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">color =</span> <span class="fu">factor</span>(sprop),</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">group =</span> <span class="fu">factor</span>(sprop))) <span class="sc">+</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(height <span class="sc">~</span> array) <span class="sc">+</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> lox,</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"North"</span>, <span class="st">"Center"</span>, <span class="st">"B Belt"</span>, <span class="st">"South"</span>)) <span class="sc">+</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">reverse =</span> <span class="cn">TRUE</span>))</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add horizontal line at y = 0 if y has both positive and negative values</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">min</span>(filtered_data<span class="sc">$</span>tav_profit) <span class="sc">&lt;</span> <span class="dv">0</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>      <span class="sc">&amp;</span> <span class="fu">max</span>(filtered_data<span class="sc">$</span>tav_profit) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>    tav_sp_plot <span class="ot">&lt;-</span> tav_sp_plot <span class="sc">+</span> </span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>,</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>                 <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(combinations[combo,])</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(tav_sp_plot)</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">paste0</span>(<span class="st">"Plots/tav_sp_"</span>, combo, <span class="st">".png"</span>))</span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
1    0.1    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
2    0.3    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
3    0.5    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
4    0.7    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
5      1    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
6    1.2    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
7    1.5    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
8    1.8    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
9      2    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
10    0.1    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
11    0.3    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
12    0.5    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
13    0.7    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
14      1    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
15    1.2    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
16    1.5    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
17    1.8    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
18      2    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
19    0.1    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
20    0.3    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
21    0.5    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
22    0.7    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
23      1    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
24    1.2    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
25    1.5    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
26    1.8    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
27      2    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
28    0.1    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
29    0.3    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
30    0.5    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
31    0.7    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
32      1    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
33    1.2    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
34    1.5    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-34.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
35    1.8    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-35.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
36      2    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-36.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
37    0.1    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-37.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
38    0.3    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-38.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
39    0.5    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-39.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
40    0.7    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-40.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
41      1    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-41.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
42    1.2    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-42.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
43    1.5    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-43.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
44    1.8    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-44.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
45      2    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-45.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
46    0.1    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-46.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
47    0.3    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-47.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
48    0.5    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-48.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
49    0.7    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-49.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
50      1    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-50.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
51    1.2    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-51.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
52    1.5    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-52.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
53    1.8    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-53.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
54      2    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-54.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
55    0.1    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-55.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
56    0.3    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-56.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
57    0.5    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-57.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
58    0.7    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-58.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
59      1    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-59.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
60    1.2    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-60.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
61    1.5    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-61.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
62    1.8    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-62.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
63      2    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-63.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
64    0.1    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-64.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
65    0.3    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-65.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
66    0.5    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-66.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
67    0.7    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-67.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
68      1    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-68.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
69    1.2    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-69.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
70    1.5    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-70.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
71    1.8    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-71.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
72      2    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-72.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
73    0.1    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-73.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
74    0.3    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-74.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
75    0.5    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-75.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
76    0.7    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-76.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
77      1    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-77.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
78    1.2    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-78.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
79    1.5    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-79.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
80    1.8    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-80.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
81      2    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-13-81.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plotting-tomato-profits-by-yield-variation" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="plotting-tomato-profits-by-yield-variation"><span class="header-section-number">3.1.2</span> Plotting Tomato Profits by Yield Variation:</h3>
<p>You can see plot breakdown based on solar proportion, crop price, and electricity price. You can see variation for all crop yield variation in one facet of the chart. Each facet of the chart contain av profit three heights of solar panels, four regions of AL, two array types.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>lox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>array_levs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Single Axis Rotation"</span>, <span class="st">"Fixed Open Rack"</span>)</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>combinations <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">sprop =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>), <span class="co"># Solar proportion</span></span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">price =</span> <span class="fu">c</span>(<span class="dv">17</span>, <span class="dv">20</span>, <span class="dv">23</span>), <span class="co"># Tomato price</span></span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">elcprc =</span> <span class="fu">c</span>(<span class="fl">0.03</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span>) <span class="co">#Electricity price</span></span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over the combinations and create the plots</span></span>
<span id="cb186-10"><a href="#cb186-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (combo <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(combinations))) {</span>
<span id="cb186-11"><a href="#cb186-11" aria-hidden="true" tabindex="-1"></a>  filtered_data <span class="ot">&lt;-</span> tav_profit <span class="sc">%&gt;%</span></span>
<span id="cb186-12"><a href="#cb186-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb186-13"><a href="#cb186-13" aria-hidden="true" tabindex="-1"></a>      sprop <span class="sc">==</span> combinations<span class="sc">$</span>sprop[combo],</span>
<span id="cb186-14"><a href="#cb186-14" aria-hidden="true" tabindex="-1"></a>      price <span class="sc">==</span> combinations<span class="sc">$</span>price[combo],</span>
<span id="cb186-15"><a href="#cb186-15" aria-hidden="true" tabindex="-1"></a>      elcprc <span class="sc">==</span> combinations<span class="sc">$</span>elcprc[combo]</span>
<span id="cb186-16"><a href="#cb186-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb186-17"><a href="#cb186-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb186-18"><a href="#cb186-18" aria-hidden="true" tabindex="-1"></a>  tav_yv_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> filtered_data,</span>
<span id="cb186-19"><a href="#cb186-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> al_regs,</span>
<span id="cb186-20"><a href="#cb186-20" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">y =</span> tav_profit,</span>
<span id="cb186-21"><a href="#cb186-21" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">color =</span> <span class="fu">factor</span>(yldvar),</span>
<span id="cb186-22"><a href="#cb186-22" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">group =</span> <span class="fu">factor</span>(yldvar))) <span class="sc">+</span></span>
<span id="cb186-23"><a href="#cb186-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb186-24"><a href="#cb186-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb186-25"><a href="#cb186-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(height <span class="sc">~</span> array) <span class="sc">+</span></span>
<span id="cb186-26"><a href="#cb186-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, </span>
<span id="cb186-27"><a href="#cb186-27" aria-hidden="true" tabindex="-1"></a>                                <span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb186-28"><a href="#cb186-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> lox,</span>
<span id="cb186-29"><a href="#cb186-29" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"North"</span>, <span class="st">"Center"</span>, <span class="st">"B Belt"</span>, <span class="st">"South"</span>)) <span class="sc">+</span></span>
<span id="cb186-30"><a href="#cb186-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>, </span>
<span id="cb186-31"><a href="#cb186-31" aria-hidden="true" tabindex="-1"></a>                                <span class="at">reverse =</span> <span class="cn">TRUE</span>))</span>
<span id="cb186-32"><a href="#cb186-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb186-33"><a href="#cb186-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add horizontal line at y = 0 if y has both positive and negative values</span></span>
<span id="cb186-34"><a href="#cb186-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">min</span>(filtered_data<span class="sc">$</span>tav_profit) <span class="sc">&lt;</span> <span class="dv">0</span></span>
<span id="cb186-35"><a href="#cb186-35" aria-hidden="true" tabindex="-1"></a>      <span class="sc">&amp;</span> <span class="fu">max</span>(filtered_data<span class="sc">$</span>tav_profit) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb186-36"><a href="#cb186-36" aria-hidden="true" tabindex="-1"></a>    tav_yv_plot <span class="ot">&lt;-</span> tav_yv_plot <span class="sc">+</span> </span>
<span id="cb186-37"><a href="#cb186-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>,</span>
<span id="cb186-38"><a href="#cb186-38" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb186-39"><a href="#cb186-39" aria-hidden="true" tabindex="-1"></a>                 <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb186-40"><a href="#cb186-40" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb186-41"><a href="#cb186-41" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb186-42"><a href="#cb186-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb186-43"><a href="#cb186-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(combinations[combo,])</span>
<span id="cb186-44"><a href="#cb186-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(tav_yv_plot)</span>
<span id="cb186-45"><a href="#cb186-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">paste0</span>(<span class="st">"Plots/tav_yv_"</span>, combo, <span class="st">".png"</span>))</span>
<span id="cb186-46"><a href="#cb186-46" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
1     0    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
2  0.25    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
3   0.5    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
4  0.75    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
5     1    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
6     0    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
7  0.25    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
8   0.5    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
9  0.75    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
10     1    20   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
11     0    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
12  0.25    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
13   0.5    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
14  0.75    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
15     1    23   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
16     0    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
17  0.25    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
18   0.5    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
19  0.75    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
20     1    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
21     0    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
22  0.25    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
23   0.5    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
24  0.75    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
25     1    20   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
26     0    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
27  0.25    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
28   0.5    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
29  0.75    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
30     1    23   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
31     0    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
32  0.25    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
33   0.5    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
34  0.75    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-34.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
35     1    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-35.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
36     0    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-36.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
37  0.25    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-37.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
38   0.5    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-38.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
39  0.75    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-39.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
40     1    20   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-40.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
41     0    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-41.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
42  0.25    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-42.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
43   0.5    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-43.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
44  0.75    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-44.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
45     1    23   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-14-45.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="strawberry-av-1" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="strawberry-av-1"><span class="header-section-number">3.2</span> Strawberry AV</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the values for each variable</span></span>
<span id="cb278-2"><a href="#cb278-2" aria-hidden="true" tabindex="-1"></a>sprop <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="fl">1.00</span>)</span>
<span id="cb278-3"><a href="#cb278-3" aria-hidden="true" tabindex="-1"></a>array <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Fixed"</span>, <span class="st">"Tracking"</span>)</span>
<span id="cb278-4"><a href="#cb278-4" aria-hidden="true" tabindex="-1"></a>height <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">4.6</span>, <span class="fl">6.4</span>, <span class="fl">8.2</span>)</span>
<span id="cb278-5"><a href="#cb278-5" aria-hidden="true" tabindex="-1"></a>yldvar <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.30</span>, <span class="fl">0.50</span>, <span class="fl">0.70</span>, <span class="fl">1.00</span>, <span class="fl">1.20</span>, <span class="fl">1.50</span>, <span class="fl">1.80</span>, <span class="fl">2.00</span>)</span>
<span id="cb278-6"><a href="#cb278-6" aria-hidden="true" tabindex="-1"></a>al_regs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb278-7"><a href="#cb278-7" aria-hidden="true" tabindex="-1"></a>price <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>)</span>
<span id="cb278-8"><a href="#cb278-8" aria-hidden="true" tabindex="-1"></a>elcprc <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.02</span>, <span class="fl">0.03</span>, <span class="fl">0.04</span>)</span>
<span id="cb278-9"><a href="#cb278-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-10"><a href="#cb278-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the required columns</span></span>
<span id="cb278-11"><a href="#cb278-11" aria-hidden="true" tabindex="-1"></a>required_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"sprop"</span>, <span class="st">"array"</span>, <span class="st">"height"</span>, </span>
<span id="cb278-12"><a href="#cb278-12" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"al_regs"</span>, <span class="st">"yldvar"</span>, <span class="st">"price"</span>, <span class="st">"elcprc"</span>)</span>
<span id="cb278-13"><a href="#cb278-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-14"><a href="#cb278-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if the columns exist in sbav_profit</span></span>
<span id="cb278-15"><a href="#cb278-15" aria-hidden="true" tabindex="-1"></a>missing_columns <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(required_columns, </span>
<span id="cb278-16"><a href="#cb278-16" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">names</span>(sbav_profit))</span>
<span id="cb278-17"><a href="#cb278-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(missing_columns) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb278-18"><a href="#cb278-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"Missing columns in sbav_profit: "</span>,</span>
<span id="cb278-19"><a href="#cb278-19" aria-hidden="true" tabindex="-1"></a>       <span class="fu">paste</span>(missing_columns, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb278-20"><a href="#cb278-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb278-21"><a href="#cb278-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-22"><a href="#cb278-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate column names using reversed order of expand.grid</span></span>
<span id="cb278-23"><a href="#cb278-23" aria-hidden="true" tabindex="-1"></a>col_names <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="fu">expand.grid</span>(height, array, sprop), <span class="dv">1</span>,</span>
<span id="cb278-24"><a href="#cb278-24" aria-hidden="true" tabindex="-1"></a>                   <span class="cf">function</span>(x) <span class="fu">paste0</span>(x[<span class="dv">3</span>], <span class="st">"%_"</span>, x[<span class="dv">2</span>], <span class="st">"_"</span>, x[<span class="dv">1</span>]))</span>
<span id="cb278-25"><a href="#cb278-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-26"><a href="#cb278-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate row names using reversed order of expand.grid</span></span>
<span id="cb278-27"><a href="#cb278-27" aria-hidden="true" tabindex="-1"></a>row_names <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="fu">expand.grid</span>(elcprc, </span>
<span id="cb278-28"><a href="#cb278-28" aria-hidden="true" tabindex="-1"></a>                               price,</span>
<span id="cb278-29"><a href="#cb278-29" aria-hidden="true" tabindex="-1"></a>                               yldvar, </span>
<span id="cb278-30"><a href="#cb278-30" aria-hidden="true" tabindex="-1"></a>                               al_regs), <span class="dv">1</span>, </span>
<span id="cb278-31"><a href="#cb278-31" aria-hidden="true" tabindex="-1"></a>                   <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="at">collapse =</span> <span class="st">"_"</span>))</span>
<span id="cb278-32"><a href="#cb278-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-33"><a href="#cb278-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty matrix to store the results</span></span>
<span id="cb278-34"><a href="#cb278-34" aria-hidden="true" tabindex="-1"></a>result_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, <span class="at">nrow =</span> <span class="fu">length</span>(row_names), </span>
<span id="cb278-35"><a href="#cb278-35" aria-hidden="true" tabindex="-1"></a>                        <span class="at">ncol =</span> <span class="fu">length</span>(col_names))</span>
<span id="cb278-36"><a href="#cb278-36" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(result_matrix) <span class="ot">&lt;-</span> col_names</span>
<span id="cb278-37"><a href="#cb278-37" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(result_matrix) <span class="ot">&lt;-</span> row_names</span>
<span id="cb278-38"><a href="#cb278-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-39"><a href="#cb278-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with</span></span>
<span id="cb278-40"><a href="#cb278-40" aria-hidden="true" tabindex="-1"></a><span class="co"># all combinations of parameters in reversed order</span></span>
<span id="cb278-41"><a href="#cb278-41" aria-hidden="true" tabindex="-1"></a>param_combinations <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">elcprc =</span> elcprc, </span>
<span id="cb278-42"><a href="#cb278-42" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">price =</span> price, </span>
<span id="cb278-43"><a href="#cb278-43" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">yldvar =</span> yldvar, </span>
<span id="cb278-44"><a href="#cb278-44" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">al_regs =</span> al_regs,</span>
<span id="cb278-45"><a href="#cb278-45" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">height =</span> height, </span>
<span id="cb278-46"><a href="#cb278-46" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">array =</span> array, </span>
<span id="cb278-47"><a href="#cb278-47" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sprop =</span> sprop)</span>
<span id="cb278-48"><a href="#cb278-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-49"><a href="#cb278-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with tav_profit to get sbav_profit values for each combination</span></span>
<span id="cb278-50"><a href="#cb278-50" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> <span class="fu">merge</span>(param_combinations, </span>
<span id="cb278-51"><a href="#cb278-51" aria-hidden="true" tabindex="-1"></a>                     sbav_profit, </span>
<span id="cb278-52"><a href="#cb278-52" aria-hidden="true" tabindex="-1"></a>                     <span class="at">by =</span> required_columns,</span>
<span id="cb278-53"><a href="#cb278-53" aria-hidden="true" tabindex="-1"></a>                     <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb278-54"><a href="#cb278-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-55"><a href="#cb278-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape merged_data to fill result_matrix with </span></span>
<span id="cb278-56"><a href="#cb278-56" aria-hidden="true" tabindex="-1"></a><span class="co"># reversed column and row names</span></span>
<span id="cb278-57"><a href="#cb278-57" aria-hidden="true" tabindex="-1"></a>merged_data<span class="sc">$</span>col_name <span class="ot">&lt;-</span> <span class="fu">apply</span>(</span>
<span id="cb278-58"><a href="#cb278-58" aria-hidden="true" tabindex="-1"></a>  merged_data[, <span class="fu">c</span>(<span class="st">"sprop"</span>, <span class="st">"array"</span>, <span class="st">"height"</span>)], <span class="dv">1</span>,</span>
<span id="cb278-59"><a href="#cb278-59" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">paste0</span>(x[<span class="dv">1</span>], <span class="st">"%_"</span>, x[<span class="dv">2</span>], <span class="st">"_"</span>, x[<span class="dv">3</span>]))</span>
<span id="cb278-60"><a href="#cb278-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-61"><a href="#cb278-61" aria-hidden="true" tabindex="-1"></a>merged_data<span class="sc">$</span>row_name <span class="ot">&lt;-</span> <span class="fu">apply</span>(</span>
<span id="cb278-62"><a href="#cb278-62" aria-hidden="true" tabindex="-1"></a>  merged_data[, <span class="fu">c</span>(<span class="st">"al_regs"</span>, <span class="st">"yldvar"</span>, <span class="st">"price"</span>, <span class="st">"elcprc"</span>)], <span class="dv">1</span>,</span>
<span id="cb278-63"><a href="#cb278-63" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">paste0</span>(x[<span class="dv">4</span>], <span class="st">"_"</span>,</span>
<span id="cb278-64"><a href="#cb278-64" aria-hidden="true" tabindex="-1"></a>                     x[<span class="dv">3</span>], <span class="st">"_"</span>,</span>
<span id="cb278-65"><a href="#cb278-65" aria-hidden="true" tabindex="-1"></a>                     x[<span class="dv">2</span>], <span class="st">"_"</span>, x[<span class="dv">1</span>]))</span>
<span id="cb278-66"><a href="#cb278-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-67"><a href="#cb278-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill the matrix with sbav_profit values</span></span>
<span id="cb278-68"><a href="#cb278-68" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(result_matrix))) {</span>
<span id="cb278-69"><a href="#cb278-69" aria-hidden="true" tabindex="-1"></a>  row_condition <span class="ot">&lt;-</span> <span class="fu">rownames</span>(result_matrix)[i]</span>
<span id="cb278-70"><a href="#cb278-70" aria-hidden="true" tabindex="-1"></a>  row_data <span class="ot">&lt;-</span> merged_data[</span>
<span id="cb278-71"><a href="#cb278-71" aria-hidden="true" tabindex="-1"></a>    merged_data<span class="sc">$</span>row_name <span class="sc">==</span> row_condition, ]</span>
<span id="cb278-72"><a href="#cb278-72" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(row_data) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb278-73"><a href="#cb278-73" aria-hidden="true" tabindex="-1"></a>    result_matrix[i, </span>
<span id="cb278-74"><a href="#cb278-74" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">match</span>(row_data<span class="sc">$</span>col_name, </span>
<span id="cb278-75"><a href="#cb278-75" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">colnames</span>(result_matrix))] <span class="ot">&lt;-</span> <span class="fu">round</span>(</span>
<span id="cb278-76"><a href="#cb278-76" aria-hidden="true" tabindex="-1"></a>                          row_data<span class="sc">$</span>sbav_profit, <span class="dv">2</span>)</span>
<span id="cb278-77"><a href="#cb278-77" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb278-78"><a href="#cb278-78" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb278-79"><a href="#cb278-79" aria-hidden="true" tabindex="-1"></a>sbav_chtbl <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(result_matrix) <span class="co">#Table in Excel.</span></span>
<span id="cb278-80"><a href="#cb278-80" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(result_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="fu">as.data.frame</span>(sbav_chtbl),</span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">row.names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb279-3"><a href="#cb279-3" aria-hidden="true" tabindex="-1"></a>          <span class="co">#col.names = TRUE,</span></span>
<span id="cb279-4"><a href="#cb279-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">file =</span> <span class="st">"sbav_chtbl.csv"</span>)</span>
<span id="cb279-5"><a href="#cb279-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(sbav_chtbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 324  30</code></pre>
</div>
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(sbav_chtbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "0.00%_Fixed_4.6"    "0.00%_Fixed_6.4"    "0.00%_Fixed_8.2"   
 [4] "0.00%_Tracking_4.6" "0.00%_Tracking_6.4" "0.00%_Tracking_8.2"
 [7] "0.25%_Fixed_4.6"    "0.25%_Fixed_6.4"    "0.25%_Fixed_8.2"   
[10] "0.25%_Tracking_4.6" "0.25%_Tracking_6.4" "0.25%_Tracking_8.2"
[13] "0.50%_Fixed_4.6"    "0.50%_Fixed_6.4"    "0.50%_Fixed_8.2"   
[16] "0.50%_Tracking_4.6" "0.50%_Tracking_6.4" "0.50%_Tracking_8.2"
[19] "0.75%_Fixed_4.6"    "0.75%_Fixed_6.4"    "0.75%_Fixed_8.2"   
[22] "0.75%_Tracking_4.6" "0.75%_Tracking_6.4" "0.75%_Tracking_8.2"
[25] "1.00%_Fixed_4.6"    "1.00%_Fixed_6.4"    "1.00%_Fixed_8.2"   
[28] "1.00%_Tracking_4.6" "1.00%_Tracking_6.4" "1.00%_Tracking_8.2"</code></pre>
</div>
</div>
<ul>
<li><p>Row naming: Electricity Price_Crop Price_Solar Proportion_Alabama Regions</p></li>
<li><p>Column naming: Solar Proportion_Array Types_Solar Panel Height.</p></li>
<li><p>Solar Proportion can be converted to total number of panels.</p></li>
<li><p>Only selected values from each variables are extracted for tabulation purpose.</p></li>
<li><p>Values displayed in the table are profit from Strawberry AV system.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the result matrix</span></span>
<span id="cb283-2"><a href="#cb283-2" aria-hidden="true" tabindex="-1"></a><span class="co">#head(sbav_chtbl)</span></span>
<span id="cb283-3"><a href="#cb283-3" aria-hidden="true" tabindex="-1"></a><span class="co">#tail(sbav_chtbl)</span></span>
<span id="cb283-4"><a href="#cb283-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(sbav_profit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "sprop"       "al_regs"     "array"       "dc_kw"       "panels"     
 [6] "energy"      "elcprc"      "elcrev"      "height"      "capex"      
[11] "ttlcost"     "anncost"     "moncost"     "eprofit"     "eannprof"   
[16] "emonprof"    "yldvar"      "yield"       "price"       "profit"     
[21] "sbav_profit"</code></pre>
</div>
</div>
<section id="plotting-strawberry-profit-by-solar-proportion" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="plotting-strawberry-profit-by-solar-proportion"><span class="header-section-number">3.2.1</span> Plotting Strawberry Profit by Solar Proportion</h3>
<p>You can see plot breakdown based on yield variation, crop price, and electricity price. You can see variation for all solar proportion in one facet of the chart. Each facet of the chart contain av profit three heights of solar panels, four regions of AL, two array types.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a>lox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb285-2"><a href="#cb285-2" aria-hidden="true" tabindex="-1"></a>array_levs <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Single Axis Rotation"</span>, <span class="st">"Fixed Open Rack"</span>)</span>
<span id="cb285-3"><a href="#cb285-3" aria-hidden="true" tabindex="-1"></a>combinations <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb285-4"><a href="#cb285-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">yldvar =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span>, <span class="dv">1</span>, <span class="fl">1.20</span>, <span class="fl">1.5</span>, <span class="fl">1.80</span>, <span class="dv">2</span>), <span class="co"># Yield proportion</span></span>
<span id="cb285-5"><a href="#cb285-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">price =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>), <span class="co"># Strawbeery price</span></span>
<span id="cb285-6"><a href="#cb285-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">elcprc =</span> <span class="fu">c</span>(<span class="fl">0.03</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span>) <span class="co">#Electricity price</span></span>
<span id="cb285-7"><a href="#cb285-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb285-8"><a href="#cb285-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb285-9"><a href="#cb285-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over the combinations and create the plots</span></span>
<span id="cb285-10"><a href="#cb285-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (combo <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(combinations))) {</span>
<span id="cb285-11"><a href="#cb285-11" aria-hidden="true" tabindex="-1"></a>  filtered_data <span class="ot">&lt;-</span> sbav_profit <span class="sc">%&gt;%</span></span>
<span id="cb285-12"><a href="#cb285-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb285-13"><a href="#cb285-13" aria-hidden="true" tabindex="-1"></a>      yldvar <span class="sc">==</span> combinations<span class="sc">$</span>yldvar[combo],</span>
<span id="cb285-14"><a href="#cb285-14" aria-hidden="true" tabindex="-1"></a>      price <span class="sc">==</span> combinations<span class="sc">$</span>price[combo],</span>
<span id="cb285-15"><a href="#cb285-15" aria-hidden="true" tabindex="-1"></a>      elcprc <span class="sc">==</span> combinations<span class="sc">$</span>elcprc[combo]</span>
<span id="cb285-16"><a href="#cb285-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb285-17"><a href="#cb285-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb285-18"><a href="#cb285-18" aria-hidden="true" tabindex="-1"></a>  sbav_sp_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> filtered_data,</span>
<span id="cb285-19"><a href="#cb285-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> al_regs,</span>
<span id="cb285-20"><a href="#cb285-20" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">y =</span> sbav_profit,</span>
<span id="cb285-21"><a href="#cb285-21" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">color =</span> <span class="fu">factor</span>(sprop),</span>
<span id="cb285-22"><a href="#cb285-22" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">group =</span> <span class="fu">factor</span>(sprop))) <span class="sc">+</span></span>
<span id="cb285-23"><a href="#cb285-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb285-24"><a href="#cb285-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb285-25"><a href="#cb285-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(height <span class="sc">~</span> array) <span class="sc">+</span></span>
<span id="cb285-26"><a href="#cb285-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb285-27"><a href="#cb285-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> lox,</span>
<span id="cb285-28"><a href="#cb285-28" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"North"</span>, <span class="st">"Center"</span>, <span class="st">"B Belt"</span>, <span class="st">"South"</span>)) <span class="sc">+</span></span>
<span id="cb285-29"><a href="#cb285-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">reverse =</span> <span class="cn">TRUE</span>))</span>
<span id="cb285-30"><a href="#cb285-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb285-31"><a href="#cb285-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add horizontal line at y = 0 if y has both positive and negative values</span></span>
<span id="cb285-32"><a href="#cb285-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">min</span>(filtered_data<span class="sc">$</span>sbav_profit) <span class="sc">&lt;</span> <span class="dv">0</span></span>
<span id="cb285-33"><a href="#cb285-33" aria-hidden="true" tabindex="-1"></a>      <span class="sc">&amp;</span> <span class="fu">max</span>(filtered_data<span class="sc">$</span>sbav_profit) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb285-34"><a href="#cb285-34" aria-hidden="true" tabindex="-1"></a>    sbav_sp_plot <span class="ot">&lt;-</span> sbav_sp_plot <span class="sc">+</span> </span>
<span id="cb285-35"><a href="#cb285-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>,</span>
<span id="cb285-36"><a href="#cb285-36" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb285-37"><a href="#cb285-37" aria-hidden="true" tabindex="-1"></a>                 <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb285-38"><a href="#cb285-38" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb285-39"><a href="#cb285-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb285-40"><a href="#cb285-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb285-41"><a href="#cb285-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(combinations[combo,])</span>
<span id="cb285-42"><a href="#cb285-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(sbav_sp_plot)</span>
<span id="cb285-43"><a href="#cb285-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">paste0</span>(<span class="st">"Plots/sbav_sp_"</span>, combo, <span class="st">".png"</span>))</span>
<span id="cb285-44"><a href="#cb285-44" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
1    0.1     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
2    0.3     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
3    0.5     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
4    0.7     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
5      1     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
6    1.2     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
7    1.5     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
8    1.8     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
9      2     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
10    0.1     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
11    0.3     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
12    0.5     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
13    0.7     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
14      1     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
15    1.2     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
16    1.5     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
17    1.8     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
18      2     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
19    0.1     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
20    0.3     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
21    0.5     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
22    0.7     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
23      1     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
24    1.2     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
25    1.5     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
26    1.8     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
27      2     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
28    0.1     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
29    0.3     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
30    0.5     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
31    0.7     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
32      1     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
33    1.2     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
34    1.5     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-34.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
35    1.8     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-35.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
36      2     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-36.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
37    0.1     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-37.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
38    0.3     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-38.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
39    0.5     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-39.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
40    0.7     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-40.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
41      1     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-41.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
42    1.2     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-42.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
43    1.5     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-43.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
44    1.8     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-44.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
45      2     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-45.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
46    0.1     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-46.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
47    0.3     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-47.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
48    0.5     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-48.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
49    0.7     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-49.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
50      1     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-50.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
51    1.2     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-51.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
52    1.5     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-52.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
53    1.8     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-53.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
54      2     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-54.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
55    0.1     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-55.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
56    0.3     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-56.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
57    0.5     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-57.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
58    0.7     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-58.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
59      1     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-59.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
60    1.2     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-60.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
61    1.5     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-61.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
62    1.8     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-62.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
63      2     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-63.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
64    0.1     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-64.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
65    0.3     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-65.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
66    0.5     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-66.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
67    0.7     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-67.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
68      1     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-68.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
69    1.2     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-69.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
70    1.5     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-70.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
71    1.8     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-71.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
72      2     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-72.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
73    0.1     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-73.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
74    0.3     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-74.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
75    0.5     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-75.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
76    0.7     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-76.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
77      1     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-77.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
78    1.2     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-78.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
79    1.5     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-79.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
80    1.8     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-80.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
81      2     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-18-81.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plotting-strawberry-profit-by-yield-variation" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="plotting-strawberry-profit-by-yield-variation"><span class="header-section-number">3.2.2</span> Plotting Strawberry Profit by Yield Variation</h3>
<p>You can see plot breakdown based on solar proportion, crop price, and electricity price. You can see variation for all crop yield variation in one facet of the chart. Each facet of the chart contain av profit three heights of solar panels, four regions of AL, two array types.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb448"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb448-1"><a href="#cb448-1" aria-hidden="true" tabindex="-1"></a>lox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb448-2"><a href="#cb448-2" aria-hidden="true" tabindex="-1"></a>array_levs <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Single Axis Rotation"</span>, <span class="st">"Fixed Open Rack"</span>)</span>
<span id="cb448-3"><a href="#cb448-3" aria-hidden="true" tabindex="-1"></a>combinations <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb448-4"><a href="#cb448-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">sprop =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>), <span class="co"># Solar proportion</span></span>
<span id="cb448-5"><a href="#cb448-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">price =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>), <span class="co"># Strawberry price</span></span>
<span id="cb448-6"><a href="#cb448-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">elcprc =</span> <span class="fu">c</span>(<span class="fl">0.03</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span>) <span class="co">#Electricity price</span></span>
<span id="cb448-7"><a href="#cb448-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb448-8"><a href="#cb448-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-9"><a href="#cb448-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over the combinations and create the plots</span></span>
<span id="cb448-10"><a href="#cb448-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (combo <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(combinations))) {</span>
<span id="cb448-11"><a href="#cb448-11" aria-hidden="true" tabindex="-1"></a>  filtered_data <span class="ot">&lt;-</span> sbav_profit <span class="sc">%&gt;%</span></span>
<span id="cb448-12"><a href="#cb448-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb448-13"><a href="#cb448-13" aria-hidden="true" tabindex="-1"></a>      sprop <span class="sc">==</span> combinations<span class="sc">$</span>sprop[combo],</span>
<span id="cb448-14"><a href="#cb448-14" aria-hidden="true" tabindex="-1"></a>      price <span class="sc">==</span> combinations<span class="sc">$</span>price[combo],</span>
<span id="cb448-15"><a href="#cb448-15" aria-hidden="true" tabindex="-1"></a>      elcprc <span class="sc">==</span> combinations<span class="sc">$</span>elcprc[combo]</span>
<span id="cb448-16"><a href="#cb448-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb448-17"><a href="#cb448-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb448-18"><a href="#cb448-18" aria-hidden="true" tabindex="-1"></a>  sbav_yv_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> filtered_data,</span>
<span id="cb448-19"><a href="#cb448-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> al_regs,</span>
<span id="cb448-20"><a href="#cb448-20" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">y =</span> sbav_profit,</span>
<span id="cb448-21"><a href="#cb448-21" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">color =</span> <span class="fu">factor</span>(yldvar),</span>
<span id="cb448-22"><a href="#cb448-22" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">group =</span> <span class="fu">factor</span>(yldvar))) <span class="sc">+</span></span>
<span id="cb448-23"><a href="#cb448-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb448-24"><a href="#cb448-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb448-25"><a href="#cb448-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(height <span class="sc">~</span> array) <span class="sc">+</span></span>
<span id="cb448-26"><a href="#cb448-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb448-27"><a href="#cb448-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> lox,</span>
<span id="cb448-28"><a href="#cb448-28" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"North"</span>, <span class="st">"Center"</span>, <span class="st">"B Belt"</span>, <span class="st">"South"</span>)) <span class="sc">+</span></span>
<span id="cb448-29"><a href="#cb448-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">reverse =</span> <span class="cn">TRUE</span>))</span>
<span id="cb448-30"><a href="#cb448-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb448-31"><a href="#cb448-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add horizontal line at y = 0 if y has both positive and negative values</span></span>
<span id="cb448-32"><a href="#cb448-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">min</span>(filtered_data<span class="sc">$</span>sbav_profit) <span class="sc">&lt;</span> <span class="dv">0</span></span>
<span id="cb448-33"><a href="#cb448-33" aria-hidden="true" tabindex="-1"></a>      <span class="sc">&amp;</span> <span class="fu">max</span>(filtered_data<span class="sc">$</span>sbav_profit) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb448-34"><a href="#cb448-34" aria-hidden="true" tabindex="-1"></a>    sbav_yv_plot <span class="ot">&lt;-</span> sbav_yv_plot <span class="sc">+</span> </span>
<span id="cb448-35"><a href="#cb448-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>,</span>
<span id="cb448-36"><a href="#cb448-36" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb448-37"><a href="#cb448-37" aria-hidden="true" tabindex="-1"></a>                 <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb448-38"><a href="#cb448-38" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb448-39"><a href="#cb448-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb448-40"><a href="#cb448-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb448-41"><a href="#cb448-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(combinations[combo,])</span>
<span id="cb448-42"><a href="#cb448-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(sbav_yv_plot)</span>
<span id="cb448-43"><a href="#cb448-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">paste0</span>(<span class="st">"Plots/sbav_yv_"</span>, combo, <span class="st">".png"</span>))</span>
<span id="cb448-44"><a href="#cb448-44" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
1     0     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
2  0.25     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
3   0.5     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
4  0.75     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
5     1     3   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
6     0     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
7  0.25     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
8   0.5     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
9  0.75     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
10     1     6   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
11     0     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
12  0.25     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
13   0.5     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
14  0.75     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
15     1     9   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
16     0     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
17  0.25     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
18   0.5     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
19  0.75     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
20     1     3   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
21     0     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
22  0.25     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
23   0.5     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
24  0.75     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
25     1     6   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
26     0     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
27  0.25     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
28   0.5     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
29  0.75     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
30     1     9   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
31     0     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
32  0.25     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
33   0.5     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
34  0.75     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-34.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
35     1     3   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-35.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
36     0     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-36.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
37  0.25     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-37.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
38   0.5     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-38.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
39  0.75     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-39.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
40     1     6   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-40.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
41     0     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-41.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
42  0.25     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-42.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
43   0.5     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-43.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
44  0.75     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-44.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
45     1     9   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-19-45.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="squash-av-1" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="squash-av-1"><span class="header-section-number">3.3</span> Squash AV</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb539"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb539-1"><a href="#cb539-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the values for each variable</span></span>
<span id="cb539-2"><a href="#cb539-2" aria-hidden="true" tabindex="-1"></a>sprop <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="fl">1.00</span>)</span>
<span id="cb539-3"><a href="#cb539-3" aria-hidden="true" tabindex="-1"></a>array <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Fixed"</span>, <span class="st">"Tracking"</span>)</span>
<span id="cb539-4"><a href="#cb539-4" aria-hidden="true" tabindex="-1"></a>height <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">4.6</span>, <span class="fl">6.4</span>, <span class="fl">8.2</span>)</span>
<span id="cb539-5"><a href="#cb539-5" aria-hidden="true" tabindex="-1"></a>yldvar <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.30</span>, <span class="fl">0.50</span>, <span class="fl">0.70</span>, <span class="fl">1.00</span>, <span class="fl">1.20</span>, <span class="fl">1.50</span>, <span class="fl">1.80</span>, <span class="fl">2.00</span>)</span>
<span id="cb539-6"><a href="#cb539-6" aria-hidden="true" tabindex="-1"></a>al_regs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb539-7"><a href="#cb539-7" aria-hidden="true" tabindex="-1"></a>price <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">14</span>, <span class="dv">17</span>)</span>
<span id="cb539-8"><a href="#cb539-8" aria-hidden="true" tabindex="-1"></a>elcprc <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.02</span>, <span class="fl">0.03</span>, <span class="fl">0.04</span>)</span>
<span id="cb539-9"><a href="#cb539-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-10"><a href="#cb539-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the required columns</span></span>
<span id="cb539-11"><a href="#cb539-11" aria-hidden="true" tabindex="-1"></a>required_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"sprop"</span>, <span class="st">"array"</span>, <span class="st">"height"</span>, </span>
<span id="cb539-12"><a href="#cb539-12" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"al_regs"</span>, <span class="st">"yldvar"</span>, <span class="st">"price"</span>, <span class="st">"elcprc"</span>)</span>
<span id="cb539-13"><a href="#cb539-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-14"><a href="#cb539-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if the columns exist in sqav_profit</span></span>
<span id="cb539-15"><a href="#cb539-15" aria-hidden="true" tabindex="-1"></a>missing_columns <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(required_columns, </span>
<span id="cb539-16"><a href="#cb539-16" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">names</span>(sqav_profit))</span>
<span id="cb539-17"><a href="#cb539-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(missing_columns) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb539-18"><a href="#cb539-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"Missing columns in sqav_profit: "</span>,</span>
<span id="cb539-19"><a href="#cb539-19" aria-hidden="true" tabindex="-1"></a>       <span class="fu">paste</span>(missing_columns, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb539-20"><a href="#cb539-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb539-21"><a href="#cb539-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-22"><a href="#cb539-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate column names using reversed order of expand.grid</span></span>
<span id="cb539-23"><a href="#cb539-23" aria-hidden="true" tabindex="-1"></a>col_names <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="fu">expand.grid</span>(height, array, sprop), <span class="dv">1</span>,</span>
<span id="cb539-24"><a href="#cb539-24" aria-hidden="true" tabindex="-1"></a>                   <span class="cf">function</span>(x) <span class="fu">paste0</span>(x[<span class="dv">3</span>], <span class="st">"%_"</span>, x[<span class="dv">2</span>], <span class="st">"_"</span>, x[<span class="dv">1</span>]))</span>
<span id="cb539-25"><a href="#cb539-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-26"><a href="#cb539-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate row names using reversed order of expand.grid</span></span>
<span id="cb539-27"><a href="#cb539-27" aria-hidden="true" tabindex="-1"></a>row_names <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="fu">expand.grid</span>(elcprc, </span>
<span id="cb539-28"><a href="#cb539-28" aria-hidden="true" tabindex="-1"></a>                               price,</span>
<span id="cb539-29"><a href="#cb539-29" aria-hidden="true" tabindex="-1"></a>                               yldvar, </span>
<span id="cb539-30"><a href="#cb539-30" aria-hidden="true" tabindex="-1"></a>                               al_regs), <span class="dv">1</span>, </span>
<span id="cb539-31"><a href="#cb539-31" aria-hidden="true" tabindex="-1"></a>                   <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="at">collapse =</span> <span class="st">"_"</span>))</span>
<span id="cb539-32"><a href="#cb539-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-33"><a href="#cb539-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty matrix to store the results</span></span>
<span id="cb539-34"><a href="#cb539-34" aria-hidden="true" tabindex="-1"></a>result_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, <span class="at">nrow =</span> <span class="fu">length</span>(row_names), </span>
<span id="cb539-35"><a href="#cb539-35" aria-hidden="true" tabindex="-1"></a>                        <span class="at">ncol =</span> <span class="fu">length</span>(col_names))</span>
<span id="cb539-36"><a href="#cb539-36" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(result_matrix) <span class="ot">&lt;-</span> col_names</span>
<span id="cb539-37"><a href="#cb539-37" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(result_matrix) <span class="ot">&lt;-</span> row_names</span>
<span id="cb539-38"><a href="#cb539-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-39"><a href="#cb539-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with </span></span>
<span id="cb539-40"><a href="#cb539-40" aria-hidden="true" tabindex="-1"></a><span class="co"># all combinations of parameters in reversed order</span></span>
<span id="cb539-41"><a href="#cb539-41" aria-hidden="true" tabindex="-1"></a>param_combinations <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">elcprc =</span> elcprc, </span>
<span id="cb539-42"><a href="#cb539-42" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">price =</span> price, </span>
<span id="cb539-43"><a href="#cb539-43" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">yldvar =</span> yldvar, </span>
<span id="cb539-44"><a href="#cb539-44" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">al_regs =</span> al_regs,</span>
<span id="cb539-45"><a href="#cb539-45" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">height =</span> height, </span>
<span id="cb539-46"><a href="#cb539-46" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">array =</span> array, </span>
<span id="cb539-47"><a href="#cb539-47" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sprop =</span> sprop)</span>
<span id="cb539-48"><a href="#cb539-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-49"><a href="#cb539-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with tav_profit to get sqav_profit values for each combination</span></span>
<span id="cb539-50"><a href="#cb539-50" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> <span class="fu">merge</span>(param_combinations, </span>
<span id="cb539-51"><a href="#cb539-51" aria-hidden="true" tabindex="-1"></a>                     sqav_profit, </span>
<span id="cb539-52"><a href="#cb539-52" aria-hidden="true" tabindex="-1"></a>                     <span class="at">by =</span> required_columns,</span>
<span id="cb539-53"><a href="#cb539-53" aria-hidden="true" tabindex="-1"></a>                     <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb539-54"><a href="#cb539-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-55"><a href="#cb539-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape merged_data to fill result_matrix with </span></span>
<span id="cb539-56"><a href="#cb539-56" aria-hidden="true" tabindex="-1"></a><span class="co"># reversed column and row names</span></span>
<span id="cb539-57"><a href="#cb539-57" aria-hidden="true" tabindex="-1"></a>merged_data<span class="sc">$</span>col_name <span class="ot">&lt;-</span> <span class="fu">apply</span>(</span>
<span id="cb539-58"><a href="#cb539-58" aria-hidden="true" tabindex="-1"></a>  merged_data[, <span class="fu">c</span>(<span class="st">"sprop"</span>, <span class="st">"array"</span>, <span class="st">"height"</span>)], <span class="dv">1</span>,</span>
<span id="cb539-59"><a href="#cb539-59" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">paste0</span>(x[<span class="dv">1</span>], <span class="st">"%_"</span>, x[<span class="dv">2</span>], <span class="st">"_"</span>, x[<span class="dv">3</span>]))</span>
<span id="cb539-60"><a href="#cb539-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-61"><a href="#cb539-61" aria-hidden="true" tabindex="-1"></a>merged_data<span class="sc">$</span>row_name <span class="ot">&lt;-</span> <span class="fu">apply</span>(</span>
<span id="cb539-62"><a href="#cb539-62" aria-hidden="true" tabindex="-1"></a>  merged_data[, <span class="fu">c</span>(<span class="st">"al_regs"</span>, <span class="st">"yldvar"</span>, <span class="st">"price"</span>, <span class="st">"elcprc"</span>)], <span class="dv">1</span>,</span>
<span id="cb539-63"><a href="#cb539-63" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">paste0</span>(x[<span class="dv">4</span>], <span class="st">"_"</span>,</span>
<span id="cb539-64"><a href="#cb539-64" aria-hidden="true" tabindex="-1"></a>                     x[<span class="dv">3</span>], <span class="st">"_"</span>,</span>
<span id="cb539-65"><a href="#cb539-65" aria-hidden="true" tabindex="-1"></a>                     x[<span class="dv">2</span>], <span class="st">"_"</span>, x[<span class="dv">1</span>]))</span>
<span id="cb539-66"><a href="#cb539-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-67"><a href="#cb539-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill the matrix with sqav_profit values</span></span>
<span id="cb539-68"><a href="#cb539-68" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(result_matrix))) {</span>
<span id="cb539-69"><a href="#cb539-69" aria-hidden="true" tabindex="-1"></a>  row_condition <span class="ot">&lt;-</span> <span class="fu">rownames</span>(result_matrix)[i]</span>
<span id="cb539-70"><a href="#cb539-70" aria-hidden="true" tabindex="-1"></a>  row_data <span class="ot">&lt;-</span> merged_data[</span>
<span id="cb539-71"><a href="#cb539-71" aria-hidden="true" tabindex="-1"></a>    merged_data<span class="sc">$</span>row_name <span class="sc">==</span> row_condition, ]</span>
<span id="cb539-72"><a href="#cb539-72" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(row_data) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb539-73"><a href="#cb539-73" aria-hidden="true" tabindex="-1"></a>    result_matrix[i, </span>
<span id="cb539-74"><a href="#cb539-74" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">match</span>(row_data<span class="sc">$</span>col_name, </span>
<span id="cb539-75"><a href="#cb539-75" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">colnames</span>(result_matrix))] <span class="ot">&lt;-</span> <span class="fu">round</span>(</span>
<span id="cb539-76"><a href="#cb539-76" aria-hidden="true" tabindex="-1"></a>                          row_data<span class="sc">$</span>sqav_profit, <span class="dv">2</span>)</span>
<span id="cb539-77"><a href="#cb539-77" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb539-78"><a href="#cb539-78" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb539-79"><a href="#cb539-79" aria-hidden="true" tabindex="-1"></a>sqav_chtbl <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(result_matrix) <span class="co">#Table in Excel.</span></span>
<span id="cb539-80"><a href="#cb539-80" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(result_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb540"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb540-1"><a href="#cb540-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="fu">as.data.frame</span>(sqav_chtbl),</span>
<span id="cb540-2"><a href="#cb540-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">row.names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb540-3"><a href="#cb540-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">file =</span> <span class="st">"sqav_chtbl.csv"</span>)</span>
<span id="cb540-4"><a href="#cb540-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(sqav_chtbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 324  30</code></pre>
</div>
</div>
<ul>
<li><p>Row naming: Electricity Price_Crop Price_Solar Proportion_Alabama Regions</p></li>
<li><p>Column naming: Solar Proportion_Array Types_Solar Panel Height.</p></li>
<li><p>Solar Proportion can be converted to total number of panels.</p></li>
<li><p>Only selected values from each variables are extracted for tabulation purpose.</p></li>
<li><p>Values displayed in the table are profit from Squash AV system.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb542"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb542-1"><a href="#cb542-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the result matrix</span></span>
<span id="cb542-2"><a href="#cb542-2" aria-hidden="true" tabindex="-1"></a><span class="co">#head(sqav_chtbl)</span></span>
<span id="cb542-3"><a href="#cb542-3" aria-hidden="true" tabindex="-1"></a><span class="co">#tail(sqav_chtbl)</span></span>
<span id="cb542-4"><a href="#cb542-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(sqav_profit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "sprop"       "al_regs"     "array"       "dc_kw"       "panels"     
 [6] "energy"      "elcprc"      "elcrev"      "height"      "capex"      
[11] "ttlcost"     "anncost"     "moncost"     "eprofit"     "eannprof"   
[16] "emonprof"    "yldvar"      "yield"       "price"       "profit"     
[21] "sqav_profit"</code></pre>
</div>
</div>
<section id="plotting-squash-profit-by-solar-proportion" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="plotting-squash-profit-by-solar-proportion"><span class="header-section-number">3.3.1</span> Plotting Squash Profit by Solar Proportion</h3>
<p>You can see plot breakdown based on yield variation, crop price, and electricity price. You can see variation for all solar proportion in one facet of the chart. Each facet of the chart contain av profit three heights of solar panels, four regions of AL, two array types.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb544"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb544-1"><a href="#cb544-1" aria-hidden="true" tabindex="-1"></a>lox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb544-2"><a href="#cb544-2" aria-hidden="true" tabindex="-1"></a>array_levs <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Single Axis Rotation"</span>, <span class="st">"Fixed Open Rack"</span>)</span>
<span id="cb544-3"><a href="#cb544-3" aria-hidden="true" tabindex="-1"></a>combinations <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb544-4"><a href="#cb544-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">yldvar =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span>, <span class="dv">1</span>, <span class="fl">1.20</span>, <span class="fl">1.5</span>, <span class="fl">1.80</span>, <span class="dv">2</span>), <span class="co"># Yield proportion</span></span>
<span id="cb544-5"><a href="#cb544-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">price =</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">14</span>, <span class="dv">17</span>), <span class="co"># Tomato price</span></span>
<span id="cb544-6"><a href="#cb544-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">elcprc =</span> <span class="fu">c</span>(<span class="fl">0.03</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span>) <span class="co">#Electricity price</span></span>
<span id="cb544-7"><a href="#cb544-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb544-8"><a href="#cb544-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb544-9"><a href="#cb544-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over the combinations and create the plots</span></span>
<span id="cb544-10"><a href="#cb544-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (combo <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(combinations))) {</span>
<span id="cb544-11"><a href="#cb544-11" aria-hidden="true" tabindex="-1"></a>  filtered_data <span class="ot">&lt;-</span> sqav_profit <span class="sc">%&gt;%</span></span>
<span id="cb544-12"><a href="#cb544-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb544-13"><a href="#cb544-13" aria-hidden="true" tabindex="-1"></a>      yldvar <span class="sc">==</span> combinations<span class="sc">$</span>yldvar[combo],</span>
<span id="cb544-14"><a href="#cb544-14" aria-hidden="true" tabindex="-1"></a>      price <span class="sc">==</span> combinations<span class="sc">$</span>price[combo],</span>
<span id="cb544-15"><a href="#cb544-15" aria-hidden="true" tabindex="-1"></a>      elcprc <span class="sc">==</span> combinations<span class="sc">$</span>elcprc[combo]</span>
<span id="cb544-16"><a href="#cb544-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb544-17"><a href="#cb544-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb544-18"><a href="#cb544-18" aria-hidden="true" tabindex="-1"></a>  sqav_sp_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> filtered_data,</span>
<span id="cb544-19"><a href="#cb544-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> al_regs,</span>
<span id="cb544-20"><a href="#cb544-20" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">y =</span> sqav_profit,</span>
<span id="cb544-21"><a href="#cb544-21" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">color =</span> <span class="fu">factor</span>(sprop),</span>
<span id="cb544-22"><a href="#cb544-22" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">group =</span> <span class="fu">factor</span>(sprop))) <span class="sc">+</span></span>
<span id="cb544-23"><a href="#cb544-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb544-24"><a href="#cb544-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb544-25"><a href="#cb544-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(height <span class="sc">~</span> array) <span class="sc">+</span></span>
<span id="cb544-26"><a href="#cb544-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb544-27"><a href="#cb544-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> lox,</span>
<span id="cb544-28"><a href="#cb544-28" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"North"</span>, <span class="st">"Center"</span>, <span class="st">"B Belt"</span>, <span class="st">"South"</span>)) <span class="sc">+</span></span>
<span id="cb544-29"><a href="#cb544-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">reverse =</span> <span class="cn">TRUE</span>))</span>
<span id="cb544-30"><a href="#cb544-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb544-31"><a href="#cb544-31" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Add horizontal line at y = 0 if y has both positive and negative values</span></span>
<span id="cb544-32"><a href="#cb544-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">min</span>(filtered_data<span class="sc">$</span>sqav_profit) <span class="sc">&lt;</span> <span class="dv">0</span></span>
<span id="cb544-33"><a href="#cb544-33" aria-hidden="true" tabindex="-1"></a>      <span class="sc">&amp;</span> <span class="fu">max</span>(filtered_data<span class="sc">$</span>sqav_profit) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb544-34"><a href="#cb544-34" aria-hidden="true" tabindex="-1"></a>    sqav_sp_plot <span class="ot">&lt;-</span> sqav_sp_plot <span class="sc">+</span> </span>
<span id="cb544-35"><a href="#cb544-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>,</span>
<span id="cb544-36"><a href="#cb544-36" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb544-37"><a href="#cb544-37" aria-hidden="true" tabindex="-1"></a>                 <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb544-38"><a href="#cb544-38" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb544-39"><a href="#cb544-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb544-40"><a href="#cb544-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb544-41"><a href="#cb544-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(combinations[combo,])</span>
<span id="cb544-42"><a href="#cb544-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(sqav_sp_plot)</span>
<span id="cb544-43"><a href="#cb544-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">paste0</span>(<span class="st">"Plots/sqav_sp_"</span>, combo, <span class="st">".png"</span>))</span>
<span id="cb544-44"><a href="#cb544-44" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
1    0.1    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
2    0.3    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
3    0.5    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
4    0.7    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
5      1    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
6    1.2    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
7    1.5    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
8    1.8    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  yldvar price elcprc
9      2    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
10    0.1    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
11    0.3    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
12    0.5    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
13    0.7    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
14      1    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
15    1.2    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
16    1.5    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
17    1.8    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
18      2    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
19    0.1    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
20    0.3    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
21    0.5    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
22    0.7    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
23      1    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
24    1.2    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
25    1.5    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
26    1.8    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
27      2    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
28    0.1    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
29    0.3    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
30    0.5    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
31    0.7    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
32      1    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
33    1.2    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
34    1.5    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-34.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
35    1.8    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-35.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
36      2    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-36.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
37    0.1    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-37.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
38    0.3    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-38.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
39    0.5    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-39.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
40    0.7    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-40.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
41      1    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-41.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
42    1.2    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-42.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
43    1.5    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-43.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
44    1.8    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-44.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
45      2    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-45.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
46    0.1    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-46.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
47    0.3    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-47.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
48    0.5    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-48.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
49    0.7    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-49.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
50      1    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-50.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
51    1.2    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-51.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
52    1.5    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-52.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
53    1.8    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-53.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
54      2    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-54.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
55    0.1    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-55.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
56    0.3    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-56.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
57    0.5    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-57.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
58    0.7    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-58.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
59      1    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-59.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
60    1.2    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-60.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
61    1.5    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-61.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
62    1.8    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-62.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
63      2    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-63.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
64    0.1    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-64.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
65    0.3    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-65.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
66    0.5    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-66.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
67    0.7    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-67.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
68      1    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-68.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
69    1.2    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-69.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
70    1.5    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-70.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
71    1.8    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-71.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
72      2    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-72.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
73    0.1    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-73.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
74    0.3    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-74.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
75    0.5    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-75.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
76    0.7    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-76.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
77      1    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-77.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
78    1.2    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-78.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
79    1.5    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-79.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
80    1.8    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-80.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   yldvar price elcprc
81      2    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-23-81.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plotting-squash-profit-by-yield-variation" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="plotting-squash-profit-by-yield-variation"><span class="header-section-number">3.3.2</span> Plotting Squash Profit by Yield Variation</h3>
<p>You can see plot breakdown based on solar proportion, crop price, and electricity price. You can see variation for all crop yield variation in one facet of the chart. Each facet of the chart contain av profit three heights of solar panels, four regions of AL, two array types.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb707"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb707-1"><a href="#cb707-1" aria-hidden="true" tabindex="-1"></a>lox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Northern"</span>, <span class="st">"Central"</span>, <span class="st">"Black Belt"</span>, <span class="st">"Southern"</span>)</span>
<span id="cb707-2"><a href="#cb707-2" aria-hidden="true" tabindex="-1"></a>array_levs <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Single Axis Rotation"</span>, <span class="st">"Fixed Open Rack"</span>)</span>
<span id="cb707-3"><a href="#cb707-3" aria-hidden="true" tabindex="-1"></a>combinations <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb707-4"><a href="#cb707-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">sprop =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>), <span class="co"># Solar proportion</span></span>
<span id="cb707-5"><a href="#cb707-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">price =</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">14</span>, <span class="dv">17</span>), <span class="co"># Tomato price</span></span>
<span id="cb707-6"><a href="#cb707-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">elcprc =</span> <span class="fu">c</span>(<span class="fl">0.03</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span>) <span class="co">#Electricity price</span></span>
<span id="cb707-7"><a href="#cb707-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb707-8"><a href="#cb707-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb707-9"><a href="#cb707-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over the combinations and create the plots</span></span>
<span id="cb707-10"><a href="#cb707-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (combo <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(combinations))) {</span>
<span id="cb707-11"><a href="#cb707-11" aria-hidden="true" tabindex="-1"></a>  filtered_data <span class="ot">&lt;-</span> sqav_profit <span class="sc">%&gt;%</span></span>
<span id="cb707-12"><a href="#cb707-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb707-13"><a href="#cb707-13" aria-hidden="true" tabindex="-1"></a>      sprop <span class="sc">==</span> combinations<span class="sc">$</span>sprop[combo],</span>
<span id="cb707-14"><a href="#cb707-14" aria-hidden="true" tabindex="-1"></a>      price <span class="sc">==</span> combinations<span class="sc">$</span>price[combo],</span>
<span id="cb707-15"><a href="#cb707-15" aria-hidden="true" tabindex="-1"></a>      elcprc <span class="sc">==</span> combinations<span class="sc">$</span>elcprc[combo]</span>
<span id="cb707-16"><a href="#cb707-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb707-17"><a href="#cb707-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb707-18"><a href="#cb707-18" aria-hidden="true" tabindex="-1"></a>  sqav_yv_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> filtered_data,</span>
<span id="cb707-19"><a href="#cb707-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> al_regs,</span>
<span id="cb707-20"><a href="#cb707-20" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">y =</span> sqav_profit,</span>
<span id="cb707-21"><a href="#cb707-21" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">color =</span> <span class="fu">factor</span>(yldvar),</span>
<span id="cb707-22"><a href="#cb707-22" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">group =</span> <span class="fu">factor</span>(yldvar))) <span class="sc">+</span></span>
<span id="cb707-23"><a href="#cb707-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb707-24"><a href="#cb707-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb707-25"><a href="#cb707-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(height <span class="sc">~</span> array) <span class="sc">+</span></span>
<span id="cb707-26"><a href="#cb707-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, </span>
<span id="cb707-27"><a href="#cb707-27" aria-hidden="true" tabindex="-1"></a>                                <span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb707-28"><a href="#cb707-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> lox,</span>
<span id="cb707-29"><a href="#cb707-29" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"North"</span>, <span class="st">"Center"</span>, <span class="st">"B Belt"</span>, <span class="st">"South"</span>)) <span class="sc">+</span></span>
<span id="cb707-30"><a href="#cb707-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>, </span>
<span id="cb707-31"><a href="#cb707-31" aria-hidden="true" tabindex="-1"></a>                                <span class="at">reverse =</span> <span class="cn">TRUE</span>))</span>
<span id="cb707-32"><a href="#cb707-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb707-33"><a href="#cb707-33" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Add horizontal line at y = 0 if y has both positive and negative values</span></span>
<span id="cb707-34"><a href="#cb707-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">min</span>(filtered_data<span class="sc">$</span>sqav_profit) <span class="sc">&lt;</span> <span class="dv">0</span></span>
<span id="cb707-35"><a href="#cb707-35" aria-hidden="true" tabindex="-1"></a>      <span class="sc">&amp;</span> <span class="fu">max</span>(filtered_data<span class="sc">$</span>sqav_profit) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb707-36"><a href="#cb707-36" aria-hidden="true" tabindex="-1"></a>    sqav_yv_plot <span class="ot">&lt;-</span> sqav_yv_plot <span class="sc">+</span> </span>
<span id="cb707-37"><a href="#cb707-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>,</span>
<span id="cb707-38"><a href="#cb707-38" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb707-39"><a href="#cb707-39" aria-hidden="true" tabindex="-1"></a>                 <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb707-40"><a href="#cb707-40" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb707-41"><a href="#cb707-41" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb707-42"><a href="#cb707-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb707-43"><a href="#cb707-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(combinations[combo,])</span>
<span id="cb707-44"><a href="#cb707-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(sqav_yv_plot)</span>
<span id="cb707-45"><a href="#cb707-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">paste0</span>(<span class="st">"Plots/sqav_yv_"</span>, combo, <span class="st">".png"</span>))</span>
<span id="cb707-46"><a href="#cb707-46" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
1     0    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
2  0.25    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
3   0.5    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
4  0.75    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
5     1    11   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
6     0    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
7  0.25    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
8   0.5    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  sprop price elcprc
9  0.75    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
10     1    14   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
11     0    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
12  0.25    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
13   0.5    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
14  0.75    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
15     1    17   0.03</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
16     0    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
17  0.25    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
18   0.5    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
19  0.75    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
20     1    11   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
21     0    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
22  0.25    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
23   0.5    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
24  0.75    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
25     1    14   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
26     0    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
27  0.25    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
28   0.5    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
29  0.75    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
30     1    17   0.04</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
31     0    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
32  0.25    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
33   0.5    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
34  0.75    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-34.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
35     1    11   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-35.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
36     0    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-36.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
37  0.25    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-37.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
38   0.5    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-38.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
39  0.75    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-39.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
40     1    14   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-40.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
41     0    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-41.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
42  0.25    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-42.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
43   0.5    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-43.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
44  0.75    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-44.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   sprop price elcprc
45     1    17   0.05</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="AV-Profit_files/figure-html/unnamed-chunk-24-45.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>